define("bitbucket/util/navbuilder","module exports @atlassian/aui jquery lib/jsuri lodash bitbucket/internal/model/diff-type bitbucket/internal/model/page-state bitbucket/internal/model/path".split(" "),function(la,w,n,ma,na,oa,pa,qa,ra){function c(a,b,d){this.components=(e.default.isString(a)?[a]:a)||[];this.params=b||{};this.anchor=d||void 0}function x(a){if("string"===typeof a)return a;if(!a)throw Error(f.default.I18n.getText("bitbucket.web.error.no.project"));return a.getKey?a.getKey():a.key}
function y(){if(g.default.getProject())return g.default.getProject();throw Error(f.default.I18n.getText("bitbucket.web.error.no.project.context"));}function z(a){if("string"===typeof a)return a;if(!a)throw Error(f.default.I18n.getText("bitbucket.web.error.no.repo"));return a.getSlug?a.getSlug():a.slug}function sa(a){if("string"===typeof a)return a;if(!a)throw Error(f.default.I18n.getText("bitbucket.web.error.no.hook.key"));return a.details.key}function F(){if(g.default.getRepository())return g.default.getRepository();
throw Error(f.default.I18n.getText("bitbucket.web.error.no.repo.context"));}function G(a){if(0!==a&&!a)throw Error(f.default.I18n.getText("bitbucket.web.error.no.pull-request.id"));return("undefined"===typeof a?"undefined":babelHelpers.typeof(a))in{string:1,number:1}?a:a.getId?a.getId():a.id}function H(){if(g.default.getPullRequest())return g.default.getPullRequest();throw Error(f.default.I18n.getText("bitbucket.web.error.no.pull-request.context"));}function t(a){var b=/~(.*)/.exec(a.components[1]);
return b?new c(["users",b[1].toLowerCase()]):a}function l(a){if(1===a.length){if(a[0]&&a[0].components)return a[0].components;if(a[0]&&a[0].getComponents)return a[0].getComponents();if(ta.default.isArray(a[0]))return a[0]}return e.default.toArray(a)}function A(a){if("string"!==typeof a){a=f.default.contextPath();var b=location.pathname;0<a.length&&(b=b.substring(b.indexOf(a)+a.length));a=b+location.search+location.hash}return this._path().addParams({next:a}).makeBuilder()}function I(){return(new c("getting-started")).makeBuilder({next:A})}
function J(a){a=new c(["projects",x(a)]);return t(a).makeBuilder({allRepos:K,repo:ua,createRepo:function(){return t(this._path()).pushComponents("repos").addParams("create").makeBuilder()},settings:function(){return this._path().pushComponents("settings").makeBuilder({mergeStrategies:function(){return this._path().pushComponents("merge-strategies","git").makeBuilder()}})},permissions:p,remove:function(){return this._path().makeBuilder()},hooks:u,mergeChecks:L,users:B,groups:C,avatar:function(a){var b=
this._path().pushComponents("avatar.svg");a&&(b=b.addParams({s:a}));return b.makeBuilder()}})}function M(){return J(y())}function N(a){return this.project(a.project).repo(a)}function O(a){var b=a.toRef.repository;return this.project(b.project).repo(b).pullRequest(a)}function P(a){return this._path().addParams({category:a}).makeBuilder()}function Q(){var a=y();a=x(a);return this._path().pushComponents("projects",a).makeBuilder({repo:va})}function wa(){return Q.call(this).repo(F())}function va(a){a=
z(a);return this._path().pushComponents("repos",a).makeBuilder()}function p(){return this._path().pushComponents("permissions").makeBuilder({permission:xa,users:B,groups:C})}function xa(a){return this._path().pushComponents(a).makeBuilder({users:function(){return this._path().pushComponents("users").makeBuilder()},groups:function(){return this._path().pushComponents("groups").makeBuilder()},all:function(){return this._path().pushComponents("all").makeBuilder()}})}function B(){return this._path().pushComponents("users").makeBuilder({anonymize:ya,
create:R,deleteUser:S,captcha:function(a){return this._path().pushComponents("captcha").addParams({name:a}).makeBuilder()},view:T,filter:U,deleteSuccess:V,permissions:p,none:W})}function C(){return this._path().pushComponents("groups").makeBuilder({create:R,deleteGroup:S,view:T,filter:U,deleteSuccess:V,permissions:p,none:W})}function W(){return this._path().pushComponents("none").makeBuilder()}function K(){return t(this._path()).pushComponents("repos").makeBuilder()}function ya(){return this._path().pushComponents("anonymize").makeBuilder()}
function R(){return this._path().addParams({create:""}).makeBuilder()}function S(a){return this._path().addParams({name:a}).makeBuilder()}function T(a){return this._path().pushComponents("view").addParams({name:a}).makeBuilder()}function U(a){return this._path().addParams({filter:a}).makeBuilder()}function V(a){return this._path().addParams({deleted:a}).makeBuilder()}function ua(a){return t(this._path()).pushComponents("repos",z(a)).makeBuilder({browse:function(){return this._path().pushComponents("browse").makeBuilder(q)},
raw:function(){return this._path().pushComponents("raw").makeBuilder(q)},diff:za,commits:function(){return this._path().pushComponents("commits").makeBuilder({until:function(a){var b=this._path();a&&!a.isDefault&&("string"!==typeof a&&(a=a.displayId||a),b=b.addParams({until:a}));return b.makeBuilder()}})},branches:function(a){var b=this._path().pushComponents("branches");a&&!a.isDefault&&("string"!==typeof a&&(a=a.displayId||a.id||a),b=b.addParams({base:a}));return b.makeBuilder()},commit:Aa,compare:function(){function a(a){return function(){return this._path().pushComponents(a).makeBuilder(r)}}
return this._path().pushComponents("compare").makeBuilder(e.default.assign({commits:a("commits"),diff:a("diff")},D))},settings:function(){return this._path().pushComponents("settings").makeBuilder()},permissions:p,hooks:u,mergeChecks:L,clone:function(a){var b=this._path(),m=b.components[1].toLowerCase(),Ba=b.components[3].toLowerCase();"users"===b.components[0]&&(m="~"+m);return(new c(["scm",m,Ba+"."+a],b.params)).makeBuilder()},fork:function(){return this._path().addParams("fork").makeBuilder()},
forks:function(){return this._path().addParams("forks").makeBuilder()},allPullRequests:function(){return this._path().pushComponents("pull-requests").makeBuilder({state:function(a){return this._path().addParams({state:a}).makeBuilder()}})},createPullRequest:function(){return this._path().pushComponents("pull-requests").addParams("create").makeBuilder(r)},pullRequest:Ca,attachments:function(){return this._path().pushComponents("attachments").makeBuilder()},sizes:function(){return this._path().pushComponents("sizes").makeBuilder()},
build:function(){return this._path().pushComponents("browse").toString()}})}function X(){return M().repo(g.default.getRepository())}function za(a,b,d,m){var c=this._path(),f=a.commitRange&&a.path;if(a.getCommitRange&&a.getPath&&a.getSrcPath||f)var h=a.toJSON?a.toJSON():a;h?(a=h.commitRange,d=d||h.path,d=d.attributes?d:new v.default(d),a.pullRequest?c=c.pushComponents("pull-requests",a.pullRequest.id):(f=(new v.default(h.path)).toString(),c=c.addParams(e.default.omitBy({autoSincePath:!1!==m||h.srcPath?
void 0:m,since:a.sinceRevision&&a.sinceRevision.id||void 0,sincePath:h.srcPath&&(new v.default(h.srcPath)).toString()||void 0,until:a.untilRevision&&a.untilRevision.id||void 0,untilPath:d.toString()!==f?f:void 0},e.default.isUndefined)))):d=a;c=c.pushComponents("diff");c=c.pushComponents.apply(c,l([d]));c=c.makeBuilder(k);b&&!b.isDefault()&&(c=c.at(b.getId()));return c}function Aa(a){return this._path().pushComponents("commits",a).makeBuilder({comment:function(a){return this._path().addParams({commentId:a}).makeBuilder()}})}
function L(){return this._path().pushComponents("settings","merge-checks").makeBuilder()}function Ca(a){var b={change:function(a){return this._path().withFragment(a).makeBuilder()}};return this._path().pushComponents("pull-requests",G(a)).makeBuilder({unwatch:function(){return this._path().pushComponents("unwatch").makeBuilder()},commit:function(a){return this._path().pushComponents("commits",a).makeBuilder(babelHelpers.extends({since:function(a){return this._path().addParams({since:a}).makeBuilder(b)}},
b))},overview:function(){return this._path().pushComponents("overview").makeBuilder({comment:function(a){return this._path().addParams({commentId:a}).makeBuilder()},activity:function(a){return this._path().addParams({activityId:a}).makeBuilder()}})},diff:function(){return this._path().pushComponents("diff").makeBuilder(b)},unreviewed:function(){return this._path().pushComponents("unreviewed").makeBuilder()},commits:function(){return this._path().pushComponents("commits").makeBuilder()},build:function(){return this._path().pushComponents("overview").toString()}})}
function Y(a){a=x(a);return this._path().pushComponents("projects",a).makeBuilder({allRepos:function(){return this._path().pushComponents("repos").makeBuilder()},hooks:u,hook:Z,repo:Da,permissions:Ea,pullRequestSettings:function(){return this._path().pushComponents("settings").pushComponents("pull-requests").pushComponents("git").makeBuilder()}})}function aa(){return Y.call(this,y())}function ba(){return aa.call(this).repo(F())}function u(){return this._path().pushComponents("settings","hooks").makeBuilder()}
function Z(a){a=sa(a);return this._path().pushComponents("settings").pushComponents("hooks",a).makeBuilder({enabled:function(){return this._path().pushComponents("enabled").makeBuilder()},settings:function(){return this._path().pushComponents("settings").makeBuilder()}})}function Da(a){a=z(a);return this._path().pushComponents("repos",a).makeBuilder({tags:function(){return this._path().pushComponents("tags").makeBuilder()},branches:function(){return this._path().pushComponents("branches").makeBuilder()},
commits:function(){return this._path().pushComponents("commits").makeBuilder({since:function(a){var b=this._path();if(a){if("string"===typeof a){if("0000000000000000000000000000000000000000"===a)return b.makeBuilder()}else a=a.id;b=b.addParams({since:a})}return b.makeBuilder()}})},commit:Fa,compare:function(){var a=function(a,b){var d={};d[a]=b;return this._path().addParams(d).makeBuilder(c)},d=function(a){return function(){return this._path().pushComponents(a).makeBuilder(c)}},c={from:e.default.partial(a,
"from"),to:e.default.partial(a,"to"),fromRepo:e.default.partial(a,"fromRepo")};return this._path().pushComponents("compare").makeBuilder({changes:d("changes"),commits:d("commits"),diff:function(a){return ca.call(this,a,c)}})},changes:function(a){a=a.toJSON?a.toJSON():a;if(a.pullRequest){var b=this.pullRequest(a.pullRequest).changes();return a.diffType===da?b:b.withParams({changeScope:"RANGE",sinceId:a.sinceRevision.id,untilId:a.untilRevision.id})}if(a.untilRevision)return this.commit(a).changes();
throw Error("A valid commit-range is required to retrieve changes");},browse:function(){return this._path().pushComponents("browse").makeBuilder(q)},raw:function(){return this._path().pushComponents("raw").makeBuilder(q)},files:Ga,forks:function(){return this._path().pushComponents("forks").makeBuilder()},related:function(){return this._path().pushComponents("related").makeBuilder()},participants:function(){return this._path().pushComponents("participants").makeBuilder()},pullRequest:Ha,allPullRequests:function(){return this._path().pushComponents("pull-requests").makeBuilder()},
hooks:u,hook:Z,lastModified:function(){return this._path().pushComponents("last-modified").makeBuilder(q)},pullRequestSettings:function(){return this._path().pushComponents("settings").pushComponents("pull-requests").makeBuilder()},webhooks:function(){return this._path().pushComponents("webhooks").makeBuilder({id:function(a){return this._path().pushComponents(a).makeBuilder()}})}})}function Ha(a){a=G(a);return this._path().pushComponents("pull-requests",a).makeBuilder({activities:function(){return this._path().pushComponents("activities").makeBuilder()},
approve:function(){return this._path().pushComponents("approve").makeBuilder()},comment:function d(a){return this._path().pushComponents("comments",a).makeBuilder({comment:d})},comments:function(){return this._path().addParams({diffType:da}).pushComponents("comments").makeBuilder({commit:function(a){return this.withParams({diffType:Ia,toHash:a.getId?a.getId():a.id||a})},range:function(a,c){return this.withParams({diffType:Ja,toHash:c,fromHash:a})}})},commits:function(){return this._path().pushComponents("commits").makeBuilder()},
changes:function(){return this._path().pushComponents("changes").makeBuilder()},diff:ea,watch:function(){return this._path().pushComponents("watch").makeBuilder()},merge:function(){return this._path().pushComponents("merge").makeBuilder()},participants:function(a){return a?this._path().pushComponents("participants").pushComponents(a.slug).makeBuilder():this._path().pushComponents("participants").makeBuilder()},reopen:function(){return this._path().pushComponents("reopen").makeBuilder()},decline:function(){return this._path().pushComponents("decline").makeBuilder()}})}
function Ka(){return ba.call(this).pullRequest(H())}function Fa(a){a=a.toJSON?a.toJSON():a;var b=this._path().pushComponents("commits");if("string"===typeof a)b=b.pushComponents(a);else if(a.untilRevision)b=b.pushComponents(a.untilRevision.id),(a=a.sinceRevision&&a.sinceRevision.id)&&(b=b.addParams({since:a}));else throw Error(f.default.I18n.getText("bitbucket.web.error.no.commit.or.commitRange"));return b.makeBuilder({diff:ea,changes:function(){return this._path().pushComponents("changes").makeBuilder(fa)},
comments:function(){return this._path().pushComponents("comments").makeBuilder(fa)},watch:function(){return this._path().pushComponents("watch").makeBuilder()}})}function ca(a,b){a=a.toJSON?a.toJSON():a;var d=this._path();d=d.pushComponents("diff");d=d.pushComponents.apply(d,l([a.path]));a.srcPath&&(d=d.addParams({srcPath:(new v.default(a.srcPath)).toString()}));return d.makeBuilder(b)}function ea(a){return ca.call(this,a)}function Ga(){return this._path().pushComponents("files").makeBuilder(La)}
function Ea(){return this._path().pushComponents("permissions").makeBuilder({projectRead:function(){return this._path().pushComponents("project-read").makeBuilder({all:ha,anon:function(){return this._path().pushComponents("anon").makeBuilder(ia)}})},projectWrite:function(){return this._path().pushComponents("project-write").makeBuilder({all:ha})}})}function ha(){return this._path().pushComponents("all").makeBuilder(ia)}function Ma(){return this._path().pushComponents("hooks").makeBuilder({hook:function(a){return this._path().pushComponents(a).makeBuilder({avatar:function(a){return this._path().pushComponents("avatar").addParams({version:a}).makeBuilder()}})}})}
function ja(a){var b=this._path().pushComponents("avatar.png");a&&(b=b.addParams({s:a}));return b.makeBuilder()}function E(a){return new Na.default(a)}Object.defineProperty(w,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(n),ta=babelHelpers.interopRequireDefault(ma),Na=babelHelpers.interopRequireDefault(na),e=babelHelpers.interopRequireDefault(oa);n=babelHelpers.interopRequireDefault(pa);var g=babelHelpers.interopRequireDefault(qa),v=babelHelpers.interopRequireDefault(ra),da=n.default.EFFECTIVE,
Ia=n.default.COMMIT,Ja=n.default.RANGE;c.prototype.buildRelNoContext=function(){var a="/"+e.default.map(this.components,encodeURIComponent).join("/"),b=e.default.reduce(this.params,function(a,b,c){e.default.isArray(b)||(b=[b]);return a.concat(e.default.map(b,function(a){return{key:c,value:a}}))},[]);b=e.default.map(b,function(a){var b=encodeURIComponent(a.value);return encodeURIComponent(a.key)+(b?"\x3d"+b:"")}).join("\x26");return a+(b?"?"+b:"")+(this.anchor?"#"+encodeURI(this.anchor):"")};c.prototype.buildRelative=
function(){return f.default.contextPath()+this.buildRelNoContext()};c.prototype.buildAbsolute=function(){return location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+this.buildRelative()};c.prototype.toString=function(){return this.buildRelative()};c.prototype.addParams=function(a){var b=new c(this.components,e.default.assign({},this.params));e.default.isString(a)?b.params[a]="":a&&(a.hasOwnProperty("queryParams")?b.params=e.default.assign(b.params,a.queryParams):a.hasOwnProperty("urlMode")||
(b.params=e.default.assign(b.params,a)));return b};c.prototype.withFragment=function(a){return new c(this.components,this.params,a)};c.prototype.pushComponents=function(){var a=new c(this.components.slice(0),this.params);e.default.forEach(e.default.toArray(arguments).slice(0),function(b){""!==b&&a.components.push(b)});return a};c.prototype.makeBuilder=function(a){var b=this;return e.default.assign({_path:function(){return b},build:function(){return b.buildRelative()},buildAbsolute:function(){return b.buildAbsolute()},
buildNoContext:function(){return b.buildRelNoContext()},parse:function(){return E(this.build())},withParams:function(c){return b.addParams(c).makeBuilder(a)},withFragment:function(c){return b.withFragment(c).makeBuilder(a)},addPathComponents:function(){return b.pushComponents.apply(b,arguments).makeBuilder(a)}},a)};var k={at:function(a){var b=this._path();a&&("string"!==typeof a&&(a=a.displayId||a),b=b.addParams({at:a}));return b.makeBuilder(k)},until:function(a,b){return this._path().addParams(e.default.omitBy({until:a,
untilPath:b?b.toString():void 0},e.default.isUndefined)).makeBuilder(k)},raw:function(){return this._path().addParams({raw:""}).makeBuilder(k)}},q={path:function(){var a=this._path();return a.pushComponents.apply(a,l(arguments)).makeBuilder(k)},at:k.at},r={_builder:null,sourceBranch:function(a){return this._path().addParams({sourceBranch:a}).makeBuilder(this._builder)},targetBranch:function(a){return this._path().addParams({targetBranch:a}).makeBuilder(this._builder)},targetRepo:function(a){return this._path().addParams({targetRepoId:a}).makeBuilder(this._builder)}};
r._builder=r;var D=e.default.assign({build:function(){return this._path().pushComponents("commits").toString()}},r);D._builder=D;var fa={path:function(a){return this._path().addParams({path:a.toString()}).makeBuilder()}},ka={at:k.at},La={path:function(){var a=this._path();return a.pushComponents.apply(a,l(arguments)).makeBuilder(ka)},at:ka.at},ia={allow:function(a){return this._path().addParams({allow:a}).makeBuilder()}},Oa=/(default-avatar-)\d+(\.png)/;w.default={allRepos:function(){return(new c("repos")).makeBuilder({visibility:function(a){return this._path().addParams({visibility:a}).makeBuilder()}})},
_avatarUrl:function(a,b){return{build:function(){var c=E(a.avatarUrl);c.getQueryParamValue("s")&&c.replaceQueryParam("s",b);return c.toString().replace(Oa,"$1"+b+"$2")}}},addons:function(){return(new c(["plugins","servlet","upm"])).makeBuilder({marketplace:function(){return this._path().pushComponents("marketplace","popular").makeBuilder({category:P})},requests:function(){return this._path().pushComponents("requests","popular").makeBuilder({category:P})}})},admin:function(){return(new c("admin")).makeBuilder({permissions:p,
users:B,groups:C,licensing:function(){return this._path().pushComponents("license").makeBuilder({edit:function(){return this._path().addParams({edit:""}).makeBuilder()}})},mailServer:function(){return this._path().pushComponents("mail-server").makeBuilder()},db:function(){return this._path().pushComponents("db").makeBuilder()}})},allProjects:function(){return(new c("projects")).makeBuilder()},captcha:function(){return(new c("captcha")).addParams({ts:(new Date).getTime().toString()}).makeBuilder()},
createProject:function(){return(new c("projects")).addParams("create").makeBuilder()},currentProject:M,currentPullRequest:function(){return X.call(this).pullRequest(H())},currentRepo:X,dashboard:function(){return(new c("dashboard")).makeBuilder()},login:function(){return(new c("login")).makeBuilder({next:A})},newBuilder:function(a,b){return(new c(a,b)).makeBuilder()},parse:E,parseQuery:function(a){return new Query(a)},pluginServlets:function(){return(new c(["plugins","servlet"])).makeBuilder({path:function(){var a=
this._path();return a.pushComponents.apply(a,l(arguments)).makeBuilder({currentProject:Q,currentRepo:wa})}})},project:J,pullRequest:O,repository:N,rest:function(a,b){return(new c(["rest",a||"api",b||"latest"])).makeBuilder({projects:function(){return this._path().pushComponents("projects").makeBuilder()},project:Y,repository:N,pullRequest:O,currentProject:aa,currentRepo:ba,currentPullRequest:Ka,markup:function(){return this._path().pushComponents("markup").makeBuilder({preview:function(){return this._path().pushComponents("preview").makeBuilder()}})},
profile:function(){return this._path().pushComponents("profile").makeBuilder({recent:function(){return this._path().pushComponents("recent").makeBuilder({repos:function(){return this._path().pushComponents("repos").makeBuilder()}})}})},raw:function(){return this._path().pushComponents("raw").makeBuilder({path:function(a){var b=this._path();return b.pushComponents.apply(b,l(a)).makeBuilder()}})},users:function(a){var b=this._path().pushComponents("users");return a?b.pushComponents(a).makeBuilder({avatar:ja}):
b.makeBuilder()},groups:function(){return this._path().pushComponents("groups").makeBuilder()},hooks:Ma,allRepos:K,admin:function(){return this._path().pushComponents("admin").makeBuilder({users:function(){return this._path().pushComponents("users").makeBuilder({erasure:function(a){return this._path().pushComponents("erasure").addParams({name:a}).makeBuilder()}})}})}})},search:function(a){var b=(new c("plugins")).makeBuilder({next:A}).addPathComponents("servlet","search");a&&(b=b.withParams({q:a}));
return b},tmp:function(){return(new c("tmp")).makeBuilder({avatars:function(){return this._path().pushComponents("avatars").makeBuilder()}})},user:function(a){var b="users";if("string"===typeof a)var d=a;else d=a.slug,"SERVICE"===a.type&&(b="bots");return(new c([b,d])).makeBuilder({avatar:ja})},welcome:function(){return I()},gettingStarted:I};la.exports=w["default"]});
define("bitbucket/internal/impl/web-fragments",["module","exports","lodash","bitbucket/internal/bbui/web-fragments/web-fragments","bitbucket/internal/util/object"],function(m,e,n,p,q){function h(b){return k.default.transform(b,function(a,b,d){a[d]=b&&b._stash?b._stash:b},{})}function c(){l.default.apply(this,arguments);this._handlers={}}function f(b,a,c){return function(d,g){return this._handlers[d]?this._handlers[d](d,[b],h(g),g):window.WebFragments[a](d,h(g)).map(c.bind(null,d))}}Object.defineProperty(e,
"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(n),l=babelHelpers.interopRequireDefault(p);babelHelpers.interopRequireDefault(q).default.inherits(c,l.default);c.prototype.getWebItems=f("ITEM","getWebItems",function(b,a){return{type:"ITEM",weight:a.weight,location:b,url:a.url,key:a.moduleKey,text:a.linkText,params:a.params,id:a.linkId,cssClass:a.styleClass,tooltip:a.tooltip,iconUrl:a.iconUrl||null,iconWidth:a.iconWidth||0,iconHeight:a.iconHeight||0,description:a.description}});c.prototype.getWebSections=
f("SECTION","getWebSections",function(b,a){return{type:"SECTION",weight:a.weight,location:b,key:a.key,text:a.labelText,params:a.params,description:a.description}});c.prototype.getWebPanels=f("PANEL","_getWebPanels",function(b,a){return{type:"PANEL",weight:a.weight,location:b,key:a.key,html:a.view,params:a.params,description:a.description}});c.prototype.getWebFragments=function(b,a,c){var d=this;return k.default.chain(a).flatMap(function(a){switch(a){case "ITEM":return d.getWebItems(b,c);case "SECTION":return d.getWebSections(b,
c);case "PANEL":return d.getWebPanels(b,c)}}).sortBy("weight").value()};c.prototype.registerHandler=function(b,a){if(this._handlers[b])throw Error("Location "+b+" is being double handled.");this._handlers[b]=a};e.default=new c;m.exports=e["default"]});
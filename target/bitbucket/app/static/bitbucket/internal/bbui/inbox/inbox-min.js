define("bitbucket/internal/bbui/inbox/inbox","exports @atlassian/aui jquery lodash prop-types react bitbucket/internal/enums ../aui-react/spinner ../paged-table/paged-table ../pull-request-table/components/author-avatar ../pull-request-table/components/comments ../pull-request-table/components/pull-request-row ../pull-request-table/components/reviewers ../pull-request-table/components/tasks ../pull-request-table/components/web-section ../utils/pull-request-unique-id ./components/summary".split(" "),
function(g,c,w,x,y,b,h,z,A,B,C,D,E,F,k,G,H){Object.defineProperty(g,"__esModule",{value:!0});g.DEFAULT_PAGE_SIZE=void 0;var e=babelHelpers.interopRequireDefault(c),l=babelHelpers.interopRequireDefault(w),I=babelHelpers.interopRequireDefault(x);c=babelHelpers.interopRequireDefault(y);var a=babelHelpers.interopRequireDefault(b),J=babelHelpers.interopRequireDefault(h),K=babelHelpers.interopRequireDefault(z),m=babelHelpers.interopRequireDefault(A),L=babelHelpers.interopRequireDefault(B),n=babelHelpers.interopRequireDefault(C),
p=babelHelpers.interopRequireDefault(D),q=babelHelpers.interopRequireDefault(E),r=babelHelpers.interopRequireDefault(F),t=babelHelpers.interopRequireDefault(G),u=babelHelpers.interopRequireDefault(H);h=g.DEFAULT_PAGE_SIZE=10;var v=(0,k.getBeforeSections)();b=function(c){function b(){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}babelHelpers.inherits(b,c);babelHelpers.createClass(b,[{key:"componentDidMount",
value:function(){(0,l.default)(document).on("click",".inbox-table-wrapper .tabs-menu a",this.changeTabs);this.props.created.onMoreItemsRequested();this.props.reviewing.onMoreItemsRequested()}},{key:"componentWillUnmount",value:function(){(0,l.default)(document).off("click",".inbox-table-wrapper .tabs-menu a",this.changeTabs)}},{key:"changeTabs",value:function(a){e.default.tabs.change((0,l.default)(a.currentTarget),a);a.preventDefault()}},{key:"isPrReviewed",value:function(a,d){return I.default.some(a,
function(a){return a.user.name===d.name&&a.status===J.default.ApprovalStatus.NEEDS_WORK})}},{key:"render",value:function(){var c=this,d=this.props,b=a.default.createElement("div",{className:"empty-inbox-message"},a.default.createElement("span",{className:"aui-icon aui-icon-large aui-iconfont-tray-empty"},e.default.I18n.getText("bitbucket.component.inbox.empty.description")),a.default.createElement("h3",null,e.default.I18n.getText("bitbucket.component.inbox.empty.title"))),g=d.reviewing.pullRequests.length||
d.reviewing.loading?a.default.createElement(m.default,babelHelpers.extends({},d.reviewing,{className:"pull-requests-table",allFetchedMessage:e.default.I18n.getText("bitbucket.pull.request.all.fetched"),items:d.reviewing.pullRequests,onMoreItemsRequested:d.reviewing.onMoreItemsRequested,scrollElement:".inbox-table-wrapper",pageSize:d.pageSize,row:function(b){var e=b.focused,f=b.item;return a.default.createElement(p.default,{key:(0,t.default)(f),focused:e,prNeedsWork:c.isPrReviewed(f.reviewers,d.currentUser)},
a.default.createElement(L.default,{author:f.author}),a.default.createElement(u.default,{pullRequest:f}),v.map(function(b){return a.default.createElement(k.WebSectionCell,{key:b.key+"::before",where:"before",webSection:b,pullRequest:f})}),a.default.createElement(q.default,{currentUser:d.currentUser,currentUserAvatarSize:"medium",dialogReviewersAsTooltip:!0,pullRequest:f}),a.default.createElement(n.default,{pullRequest:f}),a.default.createElement(r.default,{pullRequest:f}))}})):b;b=d.created.pullRequests.length||
d.created.loading?a.default.createElement(m.default,babelHelpers.extends({},d.created,{className:"pull-requests-table",allFetchedMessage:e.default.I18n.getText("bitbucket.pull.request.all.fetched"),items:d.created.pullRequests,onMoreItemsRequested:d.created.onMoreItemsRequested,scrollElement:".inbox-table-wrapper",pageSize:d.pageSize,row:function(b){var d=b.focused,c=b.item;return a.default.createElement(p.default,{key:(0,t.default)(c),focused:d},a.default.createElement(u.default,{pullRequest:c}),
v.map(function(b){return a.default.createElement(k.WebSectionCell,{key:b.key+"::before",where:"before",webSection:b,pullRequest:c})}),a.default.createElement(q.default,{pullRequest:c,dialogReviewersAsTooltip:!0}),a.default.createElement(n.default,{pullRequest:c}),a.default.createElement(r.default,{pullRequest:c}))}})):b;return d.reviewing.pullRequests.length||d.created.pullRequests.length||!d.reviewing.loading&&!d.created.loading?a.default.createElement("div",{id:"inbox-wapper"},a.default.createElement("h2",
null,e.default.I18n.getText("bitbucket.component.inbox.title")),a.default.createElement("div",{className:"inbox-table-wrapper aui-tabs horizontal-tabs"},a.default.createElement("ul",{className:"tabs-menu"},a.default.createElement("li",{className:"active-tab inbox-reviewer-tab menu-item"},a.default.createElement("a",{href:"#inbox-pull-request-reviewer"},e.default.I18n.getText("bitbucket.component.inbox.reviewing"))),a.default.createElement("li",{className:"inbox-created-tab menu-item"},a.default.createElement("a",
{href:"#inbox-pull-request-created"},e.default.I18n.getText("bitbucket.component.inbox.created")))),a.default.createElement("div",{id:"inbox-pull-request-reviewer",className:"tabs-pane active-pane"},g),a.default.createElement("div",{id:"inbox-pull-request-created",className:"tabs-pane"},b))):a.default.createElement("div",{className:"inbox-spinner-padding"},a.default.createElement(K.default,null))}}]);return b}(b.Component);b.propTypes={created:c.default.shape({allFetched:c.default.bool.isRequired,
loading:c.default.bool.isRequired,onMoreItemsRequested:c.default.func.isRequired,pullRequests:c.default.array.isRequired}).isRequired,currentUser:c.default.object.isRequired,pageSize:c.default.number,reviewing:c.default.shape({allFetched:c.default.bool.isRequired,loading:c.default.bool.isRequired,onMoreItemsRequested:c.default.func.isRequired,pullRequests:c.default.array.isRequired}).isRequired};b.defaultProps={pageSize:h};g.default=b});
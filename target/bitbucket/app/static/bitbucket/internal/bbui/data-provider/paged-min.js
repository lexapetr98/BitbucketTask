define("bitbucket/internal/bbui/data-provider/paged",["module","exports","jquery","bitbucket/internal/impl/data-provider/data-provider","../javascript-errors/javascript-errors"],function(m,c,g,n,h){Object.defineProperty(c,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(g);g=babelHelpers.interopRequireDefault(n);var l=babelHelpers.interopRequireDefault(h);h=function(c){function d(){var a,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,
d);for(var e=arguments.length,c=Array(1<e?e-1:0),f=1;f<e;f++)c[f-1]=arguments[f];e=babelHelpers.possibleConstructorReturn(this,(a=d.__proto__||Object.getPrototypeOf(d)).call.apply(a,[this,b].concat(c)));e._lastPageData=null;e.filter=b.filter||{};return e}babelHelpers.inherits(d,c);babelHelpers.createClass(d,[{key:"setFilter",value:function(a,b){this.filter&&(this.filter[a]=b)}},{key:"fetchNext",value:function(){var a=this;if(this.reachedEnd)throw Error("Nothing left to fetch.");this.abort();if(this.initialData)return this._lastPageData=
this.initialData,this.currentData=this.transform(this.initialData),delete this.initialData,k.default.Deferred().resolve(this.currentData);this.trigger("data-requested");this._requestPromise=this._fetchNext(this._lastPageData);if(!this._requestPromise.abort)throw Error("no abort method on PagedDataProvider#_requestPromise.");this._requestPromise.then(function(b){a._lastPageData=b});return this._requestPromise.then(this.transform,function(){return k.default.Deferred().reject(a.errorTransform.apply(a,
arguments))}).done(function(b){a.trigger("data-loaded",b);a.currentData=b}).fail(function(b){a.trigger("data-request-failed",b)}).always(function(){a._requestPromise=null})}},{key:"reset",value:function(){this._lastPageData=null;babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"reset",this).call(this)}},{key:"_fetchNext",value:function(a){throw new l.default.NotImplementedError;}},{key:"_reachedEnd",value:function(a){throw new l.default.NotImplementedError;}},{key:"reachedEnd",
get:function(){return this._lastPageData?this._reachedEnd(this._lastPageData):!1}}]);return d}(g.default);c.default=h;m.exports=c["default"]});
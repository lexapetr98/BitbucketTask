define("bitbucket/internal/bbui/scroll-handler/scroll-handler",["module","exports","jquery","prop-types","react"],function(g,e,b,h,a){Object.defineProperty(e,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(b);b=babelHelpers.interopRequireDefault(h);a=babelHelpers.interopRequireDefault(a);var f=window.document.documentElement;a=function(b){function a(){babelHelpers.classCallCheck(this,a);return babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,
arguments))}babelHelpers.inherits(a,b);babelHelpers.createClass(a,[{key:"componentDidMount",value:function(){var d=this.props.scrollElement;this.updateListeners(null,d);this._scrollCallback&&this._scrollCallback(d)}},{key:"componentDidUpdate",value:function(d){var a=this.props.scrollElement;this.updateListeners(d.scrollElement,a);this._scrollCallback&&this._scrollCallback(a)}},{key:"componentWillUnmount",value:function(){this.updateListeners(this.props.scrollElement,null)}},{key:"scrollCallback",
value:function(a){if(!this.props.suspend&&(a=(0,c.default)(a),this._scrollingWindow||!a.is(":hidden"))){a=a.scrollTop();var b=this._getPaneHeight(),d=this._getContentHeight();if(b+a+1>=d-(this.props.bufferPx|0))this.props.onScrollToBottom()}}},{key:"updateListeners",value:function(a,b){a=(0,c.default)(a)[0];b=(0,c.default)(b)[0];a!==b&&(a&&((0,c.default)(a).off("scroll",this._scrollCallback),(0,c.default)(window).off("resize",this._scrollCallback)),b&&(this._scrollCallback=this.scrollCallback.bind(this,
b),this._getPaneHeight=(this._scrollingWindow=c.default.isWindow(b))?function(){return f.clientHeight}:function(){return b.clientHeight},this._getContentHeight=this._scrollingWindow?function(){return f.scrollHeight}:function(){return b.scrollHeight},(0,c.default)(b).on("scroll",this._scrollCallback),(0,c.default)(window).on("resize",this._scrollCallback)))}},{key:"render",value:function(){return this.props.children}}]);return a}(a.default.Component);a.propTypes={bufferPx:b.default.number,children:b.default.element.isRequired,
onScrollToBottom:b.default.func.isRequired,scrollElement:b.default.oneOfType([b.default.node,b.default.oneOf([window])]),suspend:b.default.bool};a.defaultProps={scrollElement:window};e.default=a;g.exports=e["default"]});
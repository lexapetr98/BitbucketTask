define("bitbucket/internal/bbui/paged-table/paged-table","exports @atlassian/aui classnames prop-types react bitbucket/internal/util/scroll ../aui-react/spinner ../scroll-handler/scroll-handler".split(" "),function(f,n,a,p,d,k,l,q){Object.defineProperty(f,"__esModule",{value:!0});f.DEFAULT_PAGE_SIZE=void 0;var x=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(p);var e=babelHelpers.interopRequireDefault(d),y=babelHelpers.interopRequireDefault(l),r=babelHelpers.interopRequireDefault(q);
l=f.DEFAULT_PAGE_SIZE=25;var z=function(){};d=function(a){function d(){var g,b,c,a;babelHelpers.classCallCheck(this,d);for(var e=arguments.length,f=Array(e),h=0;h<e;h++)f[h]=arguments[h];return a=(b=(c=babelHelpers.possibleConstructorReturn(this,(g=d.__proto__||Object.getPrototypeOf(d)).call.apply(g,[this].concat(f))),c),c.state={lastUpdated:Date.now()},c.fetchFirstPageIfRequired=function(){var b=c.props,a=b.allFetched,g=b.items,d=b.loading,e=b.onMoreItemsRequested;b.scrollToLoad||g.length||a||d||
e()},c.focusElInView=function(b){var a=c.props,g=a.shouldNativeFocus,d=a.scrollElement;c.focusedElement&&(a.shouldScrollOnFocus&&(0,k.centerElementInScrollContainer)(c.focusedElement,d),b||(0,k.disableHoverUntilMouseMove)(c.table),g&&c.focusedElement.focus())},c.assignFocusedElement=function(b){return c.focusedElement=b},c.open=function(){return c.focusedElement&&c.focusedElement.click()},b),babelHelpers.possibleConstructorReturn(c,a)}babelHelpers.inherits(d,a);babelHelpers.createClass(d,[{key:"componentDidMount",
value:function(){var a=this.props,b=a.items;a=a.openCallback;this.fetchFirstPageIfRequired();b.length&&this.focusElInView(!0);a&&a(this.open)}},{key:"componentDidUpdate",value:function(a){var b=a.focusedIndex,c=a.items;a=a.openCallback;this.fetchFirstPageIfRequired();b!==this.props.focusedIndex&&this.focusElInView(this.props.items.length&&0===c.length);this.props.openCallback&&this.props.openCallback!==a&&this.props.openCallback(this.open)}},{key:"render",value:function(){var a=this,b=this.props,
c=b.allFetched,d=b.allFetchedMessage,f=b.bufferPx,l=b.className,h=b.focusedIndex,k=b.header,m=b.items,t=b.loading,n=b.loadMoreMessage,p=b.noItemsMessage,u=b.onMoreItemsRequested,q=b.pageSize,v=b.row,A=b.scrollElement,w=b.scrollToLoad,B=b.showTableIfNoResults,C=this.state.lastUpdated,D=v?m.map(function(b,c){c=h===c;return v({item:b,focused:c,primaryRefCallback:c?a.assignFocusedElement:z})}):null;b=void 0;t||(c?(m.length>q&&(b=d),m.length||(b=p)):w||(b=e.default.createElement("button",{className:"aui-button aui-button-link",
onClick:u},n)));d=B||m.length?e.default.createElement("table",{className:(0,x.default)("aui paged-table",l),"data-last-updated":C,ref:function(b){return a.table=b}},k&&e.default.createElement("thead",null,k()),e.default.createElement("tbody",null,D)):null;return e.default.createElement("div",{className:"paged-table-container"},w?e.default.createElement(r.default,{bufferPx:f,onScrollToBottom:u,scrollElement:A,suspend:c||t},d):d,t&&e.default.createElement(y.default,null),b&&e.default.createElement("div",
{className:"paged-table-message"},b))}}],[{key:"getDerivedStateFromProps",value:function(a,b){var c=a.allFetched,d=a.items;a=a.loading;d=d&&d.length||0;return{allFetched:c,itemCount:d,loading:a,lastUpdated:a||d===b.itemCount&&c===b.allFetched?b.lastUpdated:Date.now()}}}]);return d}(d.Component);d.propTypes={allFetched:a.default.bool.isRequired,allFetchedMessage:a.default.string,bufferPx:r.default.propTypes.bufferPx,className:a.default.string,focusedIndex:a.default.number,header:a.default.func,items:a.default.array.isRequired,
loading:a.default.bool.isRequired,loadMoreMessage:a.default.string,noItemsMessage:a.default.string,onMoreItemsRequested:a.default.func.isRequired,openCallback:a.default.func,pageSize:a.default.number,row:a.default.func.isRequired,shouldScrollOnFocus:a.default.bool,scrollElement:r.default.propTypes.scrollElement,scrollToLoad:a.default.bool,shouldNativeFocus:a.default.bool,showTableIfNoResults:a.default.bool};d.defaultProps={loadMoreMessage:n.I18n.getText("bitbucket.web.button.load.more"),pageSize:l,
scrollToLoad:!0,shouldNativeFocus:!0,shouldScrollOnFocus:!0,showTableIfNoResults:!0};f.default=d});
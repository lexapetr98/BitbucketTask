define("bitbucket/internal/bbui/pull-request-header/components/merge-button","module exports classnames jquery prop-types react react-dom ../../aui-react/spinner".split(" "),function(m,d,a,n,p,b,e,q){Object.defineProperty(d,"__esModule",{value:!0});var r=babelHelpers.interopRequireDefault(a),g=babelHelpers.interopRequireDefault(n);a=babelHelpers.interopRequireDefault(p);var h=babelHelpers.interopRequireDefault(b),t=babelHelpers.interopRequireDefault(q);b=function(a){function b(){var c,k,a,l;babelHelpers.classCallCheck(this,
b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return l=(k=(a=babelHelpers.possibleConstructorReturn(this,(c=b.__proto__||Object.getPrototypeOf(b)).call.apply(c,[this].concat(e))),a),a.state={canMerge:!1},k),babelHelpers.possibleConstructorReturn(a,l)}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"componentDidMount",value:function(){var c=(0,e.findDOMNode)(this);(0,g.default)(c).tooltip({gravity:"ne",live:!0})}},{key:"getSnapshotBeforeUpdate",value:function(){if(this.props.mergeable.isChecking){var c=
(0,e.findDOMNode)(this).getBoundingClientRect();return c.right-c.left+"px"}return""}},{key:"componentDidUpdate",value:function(c,a,b){c=(0,e.findDOMNode)(this);c.style.width=b;c.getAttribute("title")||(c.setAttribute("title",c.getAttribute("original-title")||""),c.removeAttribute("original-title"));b=this.props.tooltipVisibility?"enable":"disable";(0,g.default)(c).tooltip(b)}},{key:"onClick",value:function(){if(this.state.canMerge)this.props.onMergeClick();else if(!this.props.mergeable.isChecking)this.props.onMergeWarningClick()}},
{key:"mergeIssueReason",value:function(){var c="";if(!this.state.canMerge){var a=this.props;c=a.conflicted;a=a.vetoes;a=void 0===a?[]:a;c=!c||a&&0!==a.length?a&&1===a.length&&!c?a[0].summaryMessage||a[0].detailedMessage:AJS.I18n.getText("bitbucket.component.pull.request.merge.issue.tooltip"):AJS.I18n.getText("bitbucket.component.pull.request.merge.conflict.tooltip")}return c}},{key:"render",value:function(){var a=this,b=this.props.mergeable.isChecking,d=!b&&this.state.canMerge,e=(0,r.default)("aui-button",
"merge-button");return h.default.createElement("button",babelHelpers.extends({onClick:function(){return a.onClick()},className:e,"aria-disabled":!d,title:b?null:this.mergeIssueReason()},this.props.extraButtonProps),b?h.default.createElement(t.default,null):AJS.I18n.getText("bitbucket.component.pull.request.toolbar.merge"))}}],[{key:"getDerivedStateFromProps",value:function(a){var b=a.conditions;return{canMerge:a.mergeable.canMerge&&b.canMerge}}}]);return b}(b.Component);b.propTypes={conflicted:a.default.bool,
conditions:a.default.object.isRequired,mergeable:a.default.shape({isChecking:a.default.bool,canMerge:a.default.bool}),onMergeClick:a.default.func.isRequired,onMergeWarningClick:a.default.func.isRequired,extraButtonProps:a.default.object,vetoes:a.default.arrayOf(a.default.shape({summaryMessage:a.default.string,detailedMessage:a.default.string.isRequired})),tooltipVisibility:a.default.bool};b.defaultProps={conflicted:!1,mergeable:{isChecking:!1,canMerge:!0},extraButtonProps:{}};d.default=b;m.exports=
d["default"]});
define("bitbucket/internal/bbui/pull-request-header/components/pull-request-more","module exports classnames jquery lodash prop-types react bitbucket/internal/enums bitbucket/internal/impl/web-fragments ../../aui-react/component".split(" "),function(h,g,b,k,p,q,e,m,f,r){Object.defineProperty(g,"__esModule",{value:!0});var t=babelHelpers.interopRequireDefault(b),c=babelHelpers.interopRequireDefault(k),n=babelHelpers.interopRequireDefault(p);b=babelHelpers.interopRequireDefault(q);var a=babelHelpers.interopRequireDefault(e),
l=babelHelpers.interopRequireDefault(f),u=babelHelpers.interopRequireDefault(r);f={onMoreAction:b.default.func.isRequired,isWatching:b.default.bool.isRequired,conditions:b.default.objectOf(b.default.bool).isRequired,pullRequest:b.default.object.isRequired};e=function(b){function d(){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.dropdownIsVisible=!1;a.throttledTriggerHideOnScroll=n.default.throttle(function(){this.dropdownIsVisible&&
(0,c.default)(".pull-request-more-trigger").trigger("aui-button-invoke")}.bind(a),50);return a}babelHelpers.inherits(d,b);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var a=this;(0,c.default)("#pull-request-header-more").on({"aui-dropdown2-show":function(){a.dropdownIsVisible=!0},"aui-dropdown2-hide":function(b){(0,c.default)(b.target).hide();a.dropdownIsVisible=!1}});(0,c.default)(document).on("scroll",this.throttledTriggerHideOnScroll)}},{key:"componentWillUnmount",value:function(){(0,
c.default)("#pull-request-header-more").off("aui-dropdown2-hide");(0,c.default)(document).off("scroll",this.throttledTriggerHideOnScroll)}},{key:"render",value:function(){var b=this,c=void 0,d=void 0,e=void 0,g=this.props.pullRequest.state===m.PullRequestState.OPEN,f=this.props.pullRequest.state===m.PullRequestState.MERGED,h=l.default.getWebItems("bitbucket.pullrequest.action",{pullRequest:this.props.pullRequest,conditions:this.props.conditions}),k=n.default.flatten(l.default.getWebSections("bitbucket.internal.pullrequest.toolbar.deprecated").map(function(a){return l.default.getWebItems("bitbucket.internal.pullrequest.toolbar.deprecated/"+
a.key)}));this.props.conditions.canEdit&&!f&&(c=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"edit"},AJS.I18n.getText("bitbucket.component.pull.request.edit"))));this.props.conditions.canDecline&&g&&(d=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"decline"},AJS.I18n.getText("bitbucket.component.pull.request.decline"))));
this.props.conditions.canDelete&&!f&&(e=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"delete"},AJS.I18n.getText("bitbucket.component.pull.request.delete"))));return a.default.createElement("div",null,a.default.createElement("button",{className:"pull-request-more-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-dropdown2-trigger-arrowless","aria-haspopup":"true","aria-owns":"pull-request-header-more"},
a.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-more"},AJS.I18n.getText("bitbucket.component.pull.request.more"))),a.default.createElement(u.default,{id:"pull-request-header-more",markup:'\x3cdiv class\x3d"aui-style-default aui-dropdown2"\x3e\x3c/div\x3e',wrapperClass:"aui-dropdown2-section"},a.default.createElement("ul",{className:"aui-list-truncate",onClick:function(a){return b.props.onMoreAction(a.target.dataset.action)},role:"presentation"},c,d,e,a.default.createElement("li",
null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"watch"},this.props.isWatching?AJS.I18n.getText("bitbucket.component.pull.request.unwatch"):AJS.I18n.getText("bitbucket.component.pull.request.watch"))),h.concat(k).map(function(b){return a.default.createElement("li",{key:b.completeModuleKey||b.key},b.url?a.default.createElement("a",{href:b.url,className:b.cssClass,id:b.id,title:b.tooltip},b.text):a.default.createElement("button",{className:(0,
t.default)("aui-button aui-button-link",b.cssClass),role:"menuitem",id:b.id,title:b.tooltip},b.text))}))))}}]);return d}(e.Component);e.propTypes=f;g.default=e;h.exports=g["default"]});
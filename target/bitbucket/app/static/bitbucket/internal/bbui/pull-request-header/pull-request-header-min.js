define("bitbucket/internal/bbui/pull-request-header/pull-request-header","module exports @atlassian/aui classnames jquery lodash prop-types react bitbucket/internal/enums ../aui-react/avatar ../branch-from-to/branch-from-to ../reviewer-avatar-list/reviewer-avatar-list ../reviewer-status/reviewer-status ./components/merge ./components/pull-request-more ./components/reopen-button ./pull-request-title-enricher".split(" "),function(n,h,k,p,q,r,a,f,d,t,l,u,v,w,x,y,z){Object.defineProperty(h,"__esModule",
{value:!0});var g=babelHelpers.interopRequireDefault(k),m=babelHelpers.interopRequireDefault(p),A=babelHelpers.interopRequireDefault(q);k=babelHelpers.interopRequireDefault(r);a=babelHelpers.interopRequireDefault(a);var c=babelHelpers.interopRequireDefault(f),B=babelHelpers.interopRequireDefault(l),C=babelHelpers.interopRequireDefault(u),D=babelHelpers.interopRequireDefault(v),E=babelHelpers.interopRequireDefault(w),F=babelHelpers.interopRequireDefault(x),G=babelHelpers.interopRequireDefault(y),H=
babelHelpers.interopRequireDefault(z);l={conditions:a.default.objectOf(a.default.bool),mergeHelp:a.default.object,currentUserAsReviewer:a.default.object,currentUserIsWatching:a.default.bool,currentUserStatus:a.default.oneOf(k.default.values(d.ApprovalStatus)),onMergeClick:a.default.func.isRequired,onReOpenClick:a.default.func.isRequired,onMergeHelpDialogClose:a.default.func,onMoreAction:a.default.func.isRequired,onSelfClick:a.default.func.isRequired,onStatusClick:a.default.func.isRequired,pullRequest:a.default.object.isRequired,
permissionToReview:a.default.bool.isRequired,showMergeHelpDialog:a.default.bool};f=function(a){function e(b){babelHelpers.classCallCheck(this,e);b=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,b));b.state={prTitle:{__html:g.default.escapeHtml(b.props.pullRequest.title)}};return b}babelHelpers.inherits(e,a);babelHelpers.createClass(e,[{key:"componentDidMount",value:function(){var b=this;(0,A.default)(document).ready(function(){return b.enrichPullRequestTitle(b.props.pullRequest.title)})}},
{key:"componentDidUpdate",value:function(b){b.pullRequest.title!==this.props.pullRequest.title&&this.enrichPullRequestTitle(this.props.pullRequest.title)}},{key:"pullRequestStateReadable",value:function(b){var a,c=(a={},babelHelpers.defineProperty(a,d.PullRequestState.OPEN,g.default.I18n.getText("bitbucket.component.pull.request.list.state.open")),babelHelpers.defineProperty(a,d.PullRequestState.DECLINED,g.default.I18n.getText("bitbucket.component.pull.request.list.state.declined")),babelHelpers.defineProperty(a,
d.PullRequestState.MERGED,g.default.I18n.getText("bitbucket.component.pull.request.list.state.merged")),a);return c.hasOwnProperty(b)?c[b]:""}},{key:"enrichPullRequestTitle",value:function(b){var a=this;H.default.process(b,{},g.default.escapeHtml).then(function(b){a.setState({prTitle:{__html:b}})})}},{key:"render",value:function(){var b=this.props.pullRequest,a=b.state===d.PullRequestState.OPEN,e=void 0,f=void 0;b.state===d.PullRequestState.DECLINED&&this.props.conditions.canReOpen&&(e=c.default.createElement(G.default,
{onReOpenClick:this.props.onReOpenClick}));a&&(f=c.default.createElement(D.default,{currentUserAsReviewer:this.props.currentUserAsReviewer,onStatusClick:this.props.onStatusClick,status:this.props.currentUserStatus}));return c.default.createElement("div",{className:"pull-request-header"},c.default.createElement("div",{className:"flexible"},c.default.createElement("div",{className:"pull-request-metadata"},c.default.createElement(t.UserAvatar,{className:"author",person:b.author,withName:!0,withLink:!0}),
c.default.createElement(B.default,{fromRef:b.fromRef,toRef:b.toRef}),c.default.createElement("div",{className:"divider"}),c.default.createElement("div",{className:(0,m.default)("status","aui-lozenge",{"aui-lozenge-current":b.state===d.PullRequestState.OPEN,"aui-lozenge-error":b.state===d.PullRequestState.DECLINED,"aui-lozenge-success":b.state===d.PullRequestState.MERGED})},this.pullRequestStateReadable(b.state))),c.default.createElement("div",{className:(0,m.default)("pull-request-actions",{pullRequestIsOpen:a})},
c.default.createElement(C.default,{reviewers:b.reviewers,menuId:"overflow-reviewers",triggerClass:"overflow-reviewers-trigger",maxOpen:4,avatarSize:"small",reverse:!0,onSelfClick:this.props.onSelfClick,currentUserAsReviewer:this.props.currentUserAsReviewer,isWatching:this.props.currentUserIsWatching,permissionToReview:this.props.permissionToReview,pullRequestIsOpen:a}),f,c.default.createElement(E.default,{conditions:this.props.conditions,mergeHelp:this.props.mergeHelp,onMergeClick:this.props.onMergeClick,
onMergeHelpDialogClose:this.props.onMergeHelpDialogClose,pullRequest:b,showMergeHelpDialog:this.props.showMergeHelpDialog}),e,c.default.createElement(F.default,{onMoreAction:this.props.onMoreAction,isWatching:this.props.currentUserIsWatching,conditions:this.props.conditions,pullRequest:b}))),c.default.createElement("h2",{dangerouslySetInnerHTML:this.state.prTitle}))}}]);return e}(f.Component);f.propTypes=l;h.default=f;n.exports=h["default"]});
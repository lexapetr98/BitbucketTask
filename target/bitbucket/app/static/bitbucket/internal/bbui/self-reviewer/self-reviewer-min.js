define("bitbucket/internal/bbui/self-reviewer/self-reviewer","module exports @atlassian/aui classnames lodash prop-types react react-dom bitbucket/internal/enums bitbucket/internal/util/i18n-html ../aui-react/inline-dialog ../reviewer-avatar/reviewer-avatar ../tipsy/tipsy".split(" "),function(n,g,c,p,q,r,f,t,k,h,l,u,v){Object.defineProperty(g,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(c),w=babelHelpers.interopRequireDefault(p);c=babelHelpers.interopRequireDefault(r);var b=babelHelpers.interopRequireDefault(f),
x=babelHelpers.interopRequireDefault(h),y=babelHelpers.interopRequireDefault(l),z=babelHelpers.interopRequireDefault(u),m=babelHelpers.interopRequireDefault(v);h={currentUserAsReviewer:c.default.object,isWatching:c.default.bool,onSelfClick:c.default.func.isRequired,removeSelfModalId:c.default.string.isRequired};f=function(c){function d(){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.focusSelfButton=function(){(0,
q.defer)(function(){(0,t.findDOMNode)(a).querySelector("button").focus()})};a.state={hovered:!1};return a}babelHelpers.inherits(d,c);babelHelpers.createClass(d,[{key:"mouseEnter",value:function(a){this.setState({hovered:!0})}},{key:"mouseLeave",value:function(a){this.setState({hovered:!1})}},{key:"render",value:function(){var a=this,c=this.props.currentUserAsReviewer,d=b.default.createElement("p",null,b.default.createElement("label",{htmlFor:"self-reviewer-unwatch"},b.default.createElement("input",
{id:"self-reviewer-unwatch",className:"checkbox",type:"checkbox",ref:function(b){a._unwatchCheckbox=b}}),b.default.createElement(x.default,{params:[]},e.default.I18n.getText("bitbucket.component.self.reviewer.unwatch.html"))));return c?b.default.createElement("div",{className:(0,w.default)("self-avatar",{jsHover:this.state.hovered,reviewing:this.props.currentUserAsReviewer}),onMouseEnter:function(){return a.mouseEnter()},onMouseLeave:function(){return a.mouseLeave()},role:"presentation"},b.default.createElement(m.default,
{key:"remove-self",title:e.default.I18n.getText("bitbucket.component.self.reviewer.remove"),className:"remove-self",delay:500},b.default.createElement(l.InlineDialogTrigger,{dialogId:this.props.removeSelfModalId,className:"aui-button",onFocus:function(){return a.mouseEnter()},onBlur:function(){return a.mouseLeave()}},"\u2013")),b.default.createElement(y.default,{key:"remove_self_dialog",id:this.props.removeSelfModalId,className:"remove-self-dialog",alignment:"bottom right",onShow:function(a){a.target.querySelectorAll("input, button, a").item(0).focus()},
onHide:this.focusSelfButton},b.default.createElement("h5",null,e.default.I18n.getText("bitbucket.component.self.reviewer.remove.confirm.header")),b.default.createElement("p",null,e.default.I18n.getText("bitbucket.component.self.reviewer.remove.confirm")),this.props.isWatching?d:null,b.default.createElement("p",null,b.default.createElement("button",{className:"aui-button",onClick:function(b){a.props.onSelfClick(k.SelfAction.REMOVE_SELF,a._unwatchCheckbox?a._unwatchCheckbox.checked:null);document.getElementById(a.props.removeSelfModalId).open=
!1}},e.default.I18n.getText("bitbucket.component.self.reviewer.remove.confirm.button")))),b.default.createElement(z.default,{reviewer:c,tooltip:!1})):b.default.createElement("div",{className:"self-avatar"},b.default.createElement(m.default,{key:"add-self",title:e.default.I18n.getText("bitbucket.component.self.reviewer.add"),className:"add-self"},b.default.createElement("button",{onClick:function(){a.setState({hovered:!1});a.props.onSelfClick(k.SelfAction.ADD_SELF);a.focusSelfButton()},className:"aui-button"},
"+")))}}]);return d}(f.Component);f.propTypes=h;g.default=f;n.exports=g["default"]});
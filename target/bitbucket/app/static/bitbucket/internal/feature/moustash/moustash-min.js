define("bitbucket/internal/feature/moustash/moustash",["module","exports","@atlassian/aui","jquery","lodash"],function(e,a,h,k,l){function m(){var b=c.default.Deferred();d=new Image;d.onload=function(){b.resolve()};d.src=n.default.contextPath()+"/s/1/_/download/resources/com.atlassian.bitbucket.server.bitbucket-web:moustash/moustash.png";return b}Object.defineProperty(a,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(h),c=babelHelpers.interopRequireDefault(k),f=babelHelpers.interopRequireDefault(l),
g=!1,d;a.default={loadResources:f.default.once(function(){return c.default.when(WRM.require("wr!com.atlassian.bitbucket.server.bitbucket-web:face-detection"),m()).done(function(){g=!0})}),isReady:function(){return g},addToFaces:function(b){if(!g)throw Error("Face-detection resources not loaded yet");var a=require("lib/ccv/ccv",null),c=require("lib/ccv/face-cascade",null);a=a.detect_objects({canvas:b,cascade:c,interval:5,min_neighbors:1});var e=b.getContext("2d");f.default.forEach(a,f.default.bind(function(a){.1<
a.width/b.width&&e.drawImage(d,a.x+.05*a.width,a.y+.675*a.height,.9*a.width,.2*a.height)}))}};e.exports=a["default"]});
define("bitbucket/internal/feature/repository/sticky-branches","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/browser-location bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(u,e,v,w,x,y,z,A){function p(a){a?(k.attr("href",b.default.parse(k.attr("href")).replaceQueryParam("at",a)),l.attr("href",b.default.parse(l.attr("href")).replaceQueryParam("until",a)),m.attr("href",b.default.parse(m.attr("href")).replaceQueryParam("base",
a))):q()}function q(){k.attr("href",b.default.parse(k.attr("href")).deleteQueryParam("at"));l.attr("href",b.default.parse(l.attr("href")).deleteQueryParam("until"));m.attr("href",b.default.parse(m.attr("href")).deleteQueryParam("base"))}Object.defineProperty(e,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(v),r=babelHelpers.interopRequireDefault(w),b=babelHelpers.interopRequireDefault(x),B=babelHelpers.interopRequireDefault(y),d=babelHelpers.interopRequireDefault(z),t=babelHelpers.interopRequireDefault(A),
k,l,m;e.default={onReady:function(){var a=b.default.parse(B.default.location.href),c=b.default.currentRepo().browse().build(),h=b.default.currentRepo().commits().build();c=r.default.startsWith(a.path(),c);h=a.path()===h;a=c?a.getQueryParamValue("at"):h?a.getQueryParamValue("until"):void 0;h=c||h;var f=d.default.buildKey("current-branch","repo"),e=d.default.getSessionItem(f);k=(0,n.default)("#repository-nav-files");l=(0,n.default)("#repository-nav-commits");m=(0,n.default)("#repository-nav-branches");
if(a&&c)var g=(g=(0,n.default)("[data-revision-ref]","#repository-layout-revision-selector").data("revision-ref"))&&(g.id===a&&"commit"===g.type.id||g.id!==a&&("branch"===g.type.id||"tag"===g.type.id)&&/^[0-9a-f]{7,40}$/.test(a));c=!(c&&g);a&&c?(a=decodeURIComponent(a),a!==e&&d.default.setSessionItem(f,a),p(a)):h&&c?d.default.removeSessionItem(f):e&&p(e);t.default.on("bitbucket.internal.layout.branch.revisionRefChanged",function(a){a&&(a.getIsDefault()?(q(),d.default.removeSessionItem(f)):(a=a.getId(),
p(a),d.default.setSessionItem(f,a)))});t.default.on("bitbucket.internal.*.*.revisionRefRemoved",function(a){var b=d.default.getSessionItem(f);b&&r.default.endsWith(a.id,b)&&(q(),d.default.removeSessionItem(f))})}};u.exports=e["default"]});
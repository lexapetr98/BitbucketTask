define("bitbucket/internal/feature/repository/branch-table/branch-table","module exports @atlassian/aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/util/events bitbucket/internal/widget/paged-table/paged-table".split(" "),function(m,h,n,p,q,r,t,u,v){function k(a){if(!a)throw Error("Undefined ref");if(!a.id)throw Error("Ref without id");return a}function b(a,c){e.default.call(this,f.default.extend({},b.defaults,a));this._baseRef=k(c)}Object.defineProperty(h,
"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(n),f=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(q),x=babelHelpers.interopRequireDefault(r),y=babelHelpers.interopRequireDefault(t),g=babelHelpers.interopRequireDefault(u),e=babelHelpers.interopRequireDefault(v);b.defaults={filterable:!0,pageSize:20,noneFoundMessageHtml:d.default.escapeHtml(d.default.I18n.getText("bitbucket.web.repository.branch.table.no.branches")),noneMatchingMessageHtml:d.default.escapeHtml(d.default.I18n.getText("bitbucket.web.repository.branch.table.no.matches")),
idForEntity:function(a){return a.id},paginationContext:"branch-table"};f.default.extend(b.prototype,e.default.prototype);b.prototype.buildUrl=function(a,c,l){var b=JSON.stringify({withMessages:!1});a={base:this._baseRef.id,details:!0,start:a,limit:c,orderBy:"MODIFICATION",context:b};l&&(a.filterText=l);return x.default.rest().currentRepo().branches().withParams(a).build()};b.prototype.handleNewRows=function(a,c){this.$table.find("tbody")[c](bitbucket.internal.feature.repository.branchRows({branches:a.values,
baseRef:this._baseRef,repository:y.default.getRepository().toJSON()}))};b.prototype.isCurrentBase=function(a){return this._baseRef.id===k(a).id};b.prototype.update=function(a,c){a&&(this._baseRef=k(a));e.default.prototype.update.call(this,c)};b.prototype.remove=function(a){if(e.default.prototype.remove.call(this,a)){var c=this.$table.find('tbody \x3e tr[data-id\x3d"'+a.id+'"]');c.fadeOut(w.default.bind(function(){if(c.hasClass("focused")){var a=c.next();a=a.length?a:c.prev();a.length&&(a.addClass("focused"),
a.find("td[headers\x3dbranch-name-column] \x3e a").focus())}c.remove();this.loadedRange.reachedStart()&&this.loadedRange.reachedEnd()&&!this.$table.find("tbody \x3e tr").length&&this.handleNoData();this.updateTimestamp()},this));return!0}return!1};b.prototype.focusInitialRow=function(){this.$table.find(this.options.focusOptions.rowSelector).first().addClass(this.options.focusOptions.focusedClass).find("a").first().focus()};b.prototype.initShortcuts=function(){e.default.prototype.initShortcuts.call(this);
var a=this.options.focusOptions,c=this.$table.selector+" "+a.rowSelector,b=c+"."+a.focusedClass;g.default.on("bitbucket.internal.keyboard.shortcuts.requestMoveToNextHandler",function(b){(this.moveToNextItem?this:d.default.whenIType(b)).moveToNextItem(c,a).execute(function(){(0,f.default)(c).last().hasClass(a.focusedClass)&&window.scrollTo(0,document.documentElement.scrollHeight)})});g.default.on("bitbucket.internal.keyboard.shortcuts.requestMoveToPreviousHandler",function(b){(this.moveToPrevItem?
this:d.default.whenIType(b)).moveToPrevItem(c,a)});g.default.on("bitbucket.internal.keyboard.shortcuts.requestOpenItemHandler",function(a){(this.execute?this:d.default.whenIType(a)).execute(function(){var a=(0,f.default)(b);a.length&&(location.href=a.find("td[headers\x3dbranch-name-column] a").attr("href"))})});g.default.on("bitbucket.internal.keyboard.shortcuts.requestOpenItemActionHandler",function(a){(this.execute?this:d.default.whenIType(a)).execute(function(){var a=(0,f.default)(b);a.length&&
a.find(".branch-list-action-trigger").click()})})};h.default=b;m.exports=h["default"]});
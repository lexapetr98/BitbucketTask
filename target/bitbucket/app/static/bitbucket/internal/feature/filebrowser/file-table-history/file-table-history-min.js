define("bitbucket/internal/feature/filebrowser/file-table-history/file-table-history","module exports jquery lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/model/page-state bitbucket/internal/util/analytics bitbucket/internal/util/string-replacer".split(" "),function(q,c,r,t,u,v,w,x,y,z){function h(){a&&a.abort()}function k(){h();var b=l.default.getRevisionRef();b=b.isCommit()?b.getId():b.getLatestCommit();var c=l.default.getFilePath().getComponents();
a=A.default.rest({url:m.default.rest().currentRepo().lastModified().path(c).at(b).build(),statusCode:{404:!1,500:!1,0:function(c,b){if("timeout"===b)return f.default.add("filetable.lastmodified.timeout"),!1;if("abort"===b)return f.default.add("filetable.lastmodified.aborted",{requestTime:Date.now()-d}),!1}}}).done(function(b){f.default.add("filetable.lastmodified.succeeded",{requestTime:Date.now()-d});var a=(0,n.default)(".filebrowser-table");a.find("tr.file").each(function(){var a=(0,n.default)(this),
d=a.data("item-name"),e=b.files[d];if(e){var f=m.default.currentRepo().commit(e.id).withFragment(c.concat(d).join("/")).build();p.process(e.message,e,function(a){return bitbucket.internal.widget.filetablehistory.link({commit:e,fileUrl:f,shortMessage:a.trim(),leadingSpaces:a.match(/^\s*/)[0],trailingSpaces:a.match(/\s*$/)[0]})}).then(function(b){a.append(bitbucket.internal.widget.filetablehistory.row({linkHtml:b,commit:e}));a.find(".item-name").removeAttr("colspan")})}});B.default.defer(function(){a.find("td.hide").removeClass("hide")})}).always(function(){d=
a=null});d=Date.now()}Object.defineProperty(c,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(r),B=babelHelpers.interopRequireDefault(t),g=babelHelpers.interopRequireDefault(u),m=babelHelpers.interopRequireDefault(v),A=babelHelpers.interopRequireDefault(w),l=babelHelpers.interopRequireDefault(x),f=babelHelpers.interopRequireDefault(y),a,d,p=new (babelHelpers.interopRequireDefault(z).default);c.default={init:function(){g.default.on("bitbucket.internal.feature.filebrowser.filesChanged",
k);g.default.on("bitbucket.internal.feature.filefinder.unloaded",k);g.default.on("bitbucket.internal.feature.filefinder.loaded",h)},commitMessageEnrichment:p};q.exports=c["default"]});
define("bitbucket/internal/feature/settings/hooks/action-creators/configure-hook","exports @atlassian/aui lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/util/scope-type ../actions".split(" "),function(b,k,m,q,e,n,d){Object.defineProperty(b,"__esModule",{value:!0});b.saveHookConfiguration=b.inheritHook=b.enableHook=b.editHook=b.cancelEditHook=void 0;var h=babelHelpers.interopRequireDefault(q),f=function(d,a){return{type:d,payload:a}},l={409:!1,404:!1,400:!1},p=function(b,
a,c){c(f(d.EDIT_HOOK,{hook:a}));return(0,e.rest)({url:h.default.rest()[(0,n.scopeNavMethod)(b.type)]().hook(a.details.key).settings().build(),statusCode:l}).done(function(g){return c(f(d.LOAD_HOOK_SETTINGS_SUCCESS,{hook:a,config:g}))}).fail(function(g,b,e,r){return c(f(d.LOAD_HOOK_SETTINGS_FAILURE,{hook:a,error:(0,m.get)(r,"errors.0.message",k.I18n.getText("bitbucket.web.hooks.settings.load.error",a.details.name))}))})};b.cancelEditHook=function(b,a){return f(d.EDIT_HOOK_CANCEL,{hook:a})};b.editHook=
function(b,a){return function(c){return p(b,a,c)}};b.enableHook=function(b,a,c){return function(g){g(f(d.ENABLE_HOOK,{hook:a,enable:c}));return c&&a.details.configFormKey?p(b,a,g):(0,e.rest)({url:h.default.rest()[(0,n.scopeNavMethod)(b.type)]().hook(a.details.key).enabled().build(),type:c?e.method.PUT:e.method.DELETE,statusCode:l}).done(function(a){return g(f(d.ENABLE_HOOK_SUCCESS,{hook:a}))}).fail(function(b,e,h,t){return g(f(d.ENABLE_HOOK_FAILURE,{hook:a,enable:c,error:(0,m.get)(t,"errors.0.message",
c?k.I18n.getText("bitbucket.web.hooks.enable.error",a.details.name):k.I18n.getText("bitbucket.web.hooks.disable.error",a.details.name))}))})}};b.inheritHook=function(b,a){return function(b){b(f(d.INHERIT_HOOK,{hook:a}));var c=h.default.rest().currentRepo().hook(a.details.key).build();return(0,e.rest)({url:c,type:e.method.DELETE,statusCode:l}).fail(function(c,e,g,h){return b(f(d.INHERIT_HOOK_FAILURE,{hook:a,error:(0,m.get)(h,"errors.0.message",k.I18n.getText("bitbucket.web.hooks.inherit.error",a.details.name))}))}).then(function(){return(0,
e.rest)({url:c})}).done(function(a){return b(f(d.INHERIT_HOOK_SUCCESS,{hook:a}))})}};b.saveHookConfiguration=function(b,a,c){return function(g){g(f(d.SAVE_HOOK_SETTINGS,{hook:a,config:c}));return(0,e.rest)({url:h.default.rest()[(0,n.scopeNavMethod)(b.type)]().hook(a.details.key).enabled().build(),type:e.method.PUT,data:c,statusCode:l}).done(function(a){return g(f(d.SAVE_HOOK_SETTINGS_SUCCESS,{hook:a,config:c}))}).fail(function(b,e,h,k){return g(f(d.SAVE_HOOK_SETTINGS_FAILURE,{hook:a,config:c,errors:k.errors}))})}}});
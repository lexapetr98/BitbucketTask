define("bitbucket/internal/feature/timezone/onboarding/timezone-onboarding","module exports @atlassian/aui jquery bitbucket/util/navbuilder bitbucket/internal/feature/alerts/alerts bitbucket/internal/feature/alerts/constants bitbucket/internal/model/page-state bitbucket/internal/util/ajax bitbucket/internal/util/client-storage bitbucket/internal/util/events bitbucket/internal/util/feature-enabled".split(" "),function(p,c,q,r,t,u,v,w,x,y,z,A){function d(a){B.default.trigger("bitbucket.internal.ui.time.zone.onboarding."+
a)}function C(){d("changed");h()}function b(a){return a((new Date).getTimezoneOffset())}function D(){var a=e.default.getItem("bitbucket_known_time_zone_offset");return a?String(a):null}function E(){var a=k.default.getCurrentUser();return a?l.default.rest({url:f.default.rest().users(a.getSlug()).addPathComponents("settings").build(),type:"GET",statusCode:{"*":!1}}).then(function(a){a=String(a.USER_BROWSER_TIME_ZONE_OFFSET);e.default.setItem("bitbucket_known_time_zone_offset",a);return null!=a?a:null}):
m.default.Deferred().reject().promise()}function h(){var a={};a.USER_BROWSER_TIME_ZONE_OFFSET=b(String);return l.default.rest({url:f.default.rest().users(k.default.getCurrentUser().getSlug()).addPathComponents("settings").build(),type:"POST",data:a,statusCode:{"*":!1}}).done(function(){e.default.setItem("bitbucket_known_time_zone_offset",a.USER_BROWSER_TIME_ZONE_OFFSET)})}Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(q),m=babelHelpers.interopRequireDefault(r),
f=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(w),l=babelHelpers.interopRequireDefault(x),e=babelHelpers.interopRequireDefault(y),B=babelHelpers.interopRequireDefault(z),n;babelHelpers.interopRequireDefault(A).default.getFromProvider("user.time.zone.onboarding").done(function(a){n=a});c.default={onReady:function(){if(n&&b(Number)!==Number((0,m.default)("#content").attr("data-timezone"))&&D()!==b(String))return E().done(function(a){a!==b(String)&&(d("shown"),(0,u.add)({title:g.default.I18n.getText("bitbucket.web.timezone.onboarding.title"),
description:g.default.I18n.getText("bitbucket.web.timezone.onboarding.mismatch"),closeable:!0,closeCallback:function(){d("dismissed");h()},anchorText:g.default.I18n.getText("bitbucket.web.timezone.onboarding.change"),anchorLink:f.default.newBuilder("account").build(),anchorCallback:C,type:v.AlertType.INFO}))})}};p.exports=c["default"]});
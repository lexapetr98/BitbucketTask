define("bitbucket/internal/feature/dashboard/components/repository-search","exports lodash prop-types react react-dom react-redux bitbucket/util/events bitbucket/internal/impl/web-fragments bitbucket/internal/util/shortcuts ../action-creators/load-repositories ../repository-type".split(" "),function(e,n,a,d,p,q,r,t,u,g,h){Object.defineProperty(e,"__esModule",{value:!0});e.RepositorySearch=void 0;a=babelHelpers.interopRequireDefault(a);var l=babelHelpers.interopRequireDefault(d),v=babelHelpers.interopRequireDefault(r),
w=babelHelpers.interopRequireDefault(t),x=babelHelpers.interopRequireDefault(u);d=e.RepositorySearch=function(a){function f(){var b,m,c,a;babelHelpers.classCallCheck(this,f);for(var d=arguments.length,e=Array(d),k=0;k<d;k++)e[k]=arguments[k];return a=(m=(c=babelHelpers.possibleConstructorReturn(this,(b=f.__proto__||Object.getPrototypeOf(f)).call.apply(b,[this].concat(e))),c),c.state={Search:(0,n.get)(w.default.getWebPanels("internal.bitbucket.dashboard.repository.search")||[],"0.html",null)},m),babelHelpers.possibleConstructorReturn(c,
a)}babelHelpers.inherits(f,a);babelHelpers.createClass(f,[{key:"componentDidMount",value:function(){var b=this;x.default.bind("dashboardRepositories",function(){return b.focusRepositorySearch()})}},{key:"onSearchStart",value:function(b){this.props.onQueryChange(b);this.props.dispatch((0,g.loadRepositories)({repoType:h.SEARCH,query:b}))}},{key:"onSearchEnd",value:function(b){}},{key:"onSearchClear",value:function(){this.props.onQueryChange("");this.props.dispatch((0,g.clearRepositories)({repoType:h.SEARCH}))}},
{key:"onSearchError",value:function(){this.props.dispatch((0,g.loadRepositoriesFailure)({repoType:h.SEARCH}))}},{key:"onSearchResults",value:function(b,a,c){0===a.start&&v.default.trigger("bitbucket.internal.ui.dashboard.repository-list.search.results.loaded",null,{queryLength:b.length});this.props.dispatch((0,g.loadRepositoriesSuccess)(a,{repoType:h.SEARCH,nextSearch:c,query:b}))}},{key:"onSearchFieldEvent",value:function(b,a){"INPUT"===b.target.nodeName&&a(b)}},{key:"focusRepositorySearch",value:function(){var b=
(0,p.findDOMNode)(this).querySelector("input.search");b&&b.focus()}},{key:"render",value:function(){var b=this,a=this.state.Search,c=this.props,d=c.onKeyDown,e=c.onBlur,f=c.onFocus;c=c.pageSize;return a?l.default.createElement("div",{onKeyDown:function(a){return b.onSearchFieldEvent(a,d)},onBlur:function(a){return b.onSearchFieldEvent(a,e)},onFocus:function(a){return b.onSearchFieldEvent(a,f)},role:"presentation"},l.default.createElement(a,{onSearchStart:function(a){return b.onSearchStart(a)},onSearchEnd:function(a){return b.onSearchEnd(a)},
onSearchResults:function(a,c,d){return b.onSearchResults(a,c,d)},onSearchError:function(){return b.onSearchError()},onSearchClear:function(){return b.onSearchClear()},pageSize:c})):null}}]);return f}(d.Component);d.propTypes={onKeyDown:a.default.func,onBlur:a.default.func,onFocus:a.default.func,onQueryChange:a.default.func,pageSize:a.default.number};e.default=(0,q.connect)()(d)});
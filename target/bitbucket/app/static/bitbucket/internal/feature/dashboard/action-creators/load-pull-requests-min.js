define("bitbucket/internal/feature/dashboard/action-creators/load-pull-requests","exports jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/aui-react/avatar bitbucket/internal/enums ../actions ../pull-request-type".split(" "),function(d,t,u,v,g,w,f,l,h){function q(e,a){var b=a.limit;b=void 0===b?m:b;a=a.statusCode;a={statusCode:void 0===a?{}:a};b=x.default.rest().addPathComponents("dashboard","pull-requests").withParams({avatarSize:w.AvatarSize.MEDIUM,order:r.PARTICIPANT_STATUS,
limit:b});var c=void 0;c=void 0;switch(e){case h.CREATED:c=b.withParams({state:f.PullRequestState.OPEN,role:f.ParticipantRole.AUTHOR}).build();c=(0,g.rest)(babelHelpers.extends({},a,{url:c}));break;case h.REVIEWING:c=b.withParams({state:f.PullRequestState.OPEN,role:f.ParticipantRole.REVIEWER}).build();c=(0,g.rest)(babelHelpers.extends({},a,{url:c}));break;case h.CLOSED:b=b.withParams({order:r.CLOSED_DATE,closedSince:y,limit:k}),c=n.default.when((0,g.rest)(babelHelpers.extends({},a,{url:b.withParams({role:f.ParticipantRole.AUTHOR}).build()})).then(function(a){return a}),
(0,g.rest)(babelHelpers.extends({},a,{url:b.withParams({role:f.ParticipantRole.REVIEWER}).build()})).then(function(a){return a})).then(function(a,c){var b=(0,u.chain)(a.values.concat(c.values)).sortBy(function(a){return a.closedDate}).reverse().take(k).value();return{isLastPage:a.isLastPage&&c.isLastPage&&a.size+c.size<=k,values:b,size:b.length}})}return c}function p(e,a){a=a.type;return{type:l.LOAD_PULL_REQUESTS_SUCCESS,payload:e,meta:a===h.CLOSED?{type:a,defaultVisibleCount:k}:{type:a}}}Object.defineProperty(d,
"__esModule",{value:!0});d.populatePullRequests=d.MAX_PAGE_SIZE=d.DEFAULT_PAGE_SIZE=void 0;d.default=function(e,a){return function(b){var c={type:e};b({type:l.LOAD_PULL_REQUESTS,meta:c});return q(e,{limit:a}).done(function(a){b(p(a,c))}).fail(function(a){b({type:l.LOAD_PULL_REQUESTS_FAILURE,payload:a,meta:c})})}};d.updatePullRequestsByTypes=function(e){return function(a){var b=Object.keys(e).map(function(a){return q(a,{limit:e[a]<=m?m:z,statusCode:{"*":!1}}).then(function(b){return{payload:b,type:a}})});
return n.default.when.apply(n.default,babelHelpers.toConsumableArray(b)).done(function(){for(var b=arguments.length,e=Array(b),d=0;d<b;d++)e[d]=arguments[d];e.forEach(function(b){a(p(b.payload,b))})})}};var n=babelHelpers.interopRequireDefault(t),x=babelHelpers.interopRequireDefault(v),m=d.DEFAULT_PAGE_SIZE=25,z=d.MAX_PAGE_SIZE=100,y=604800,k=25,r={PARTICIPANT_STATUS:"participant_status",CLOSED_DATE:"closed_date"};d.populatePullRequests=function(d,a){return p(d,{type:a.type})}});
define("bitbucket/internal/feature/dashboard/components/pull-request-row","module exports @atlassian/aui classnames lodash prop-types react react-dom bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/bbui/pull-request-table/components/author-avatar bitbucket/internal/bbui/pull-request-table/components/conflict bitbucket/internal/bbui/pull-request-table/components/reviewers bitbucket/internal/bbui/ref-label/ref-label bitbucket/internal/enums bitbucket/internal/feature/pull-request/state-lozenge bitbucket/internal/util/text bitbucket/internal/widget/icons/icons ./pull-request-table-web-section".split(" "),
function(u,m,l,h,v,w,f,x,y,r,z,A,B,C,D,E,F,q,G){Object.defineProperty(m,"__esModule",{value:!0});var H=babelHelpers.interopRequireDefault(h);h=babelHelpers.interopRequireDefault(w);var a=babelHelpers.interopRequireDefault(f),I=babelHelpers.interopRequireDefault(y),J=babelHelpers.interopRequireDefault(z),K=babelHelpers.interopRequireDefault(A),L=babelHelpers.interopRequireDefault(B),M=babelHelpers.interopRequireDefault(C),N=babelHelpers.interopRequireDefault(E),O=1360>window.innerWidth?3:4,t=function(c){var d=
c.count;return d?a.default.createElement("span",{title:c.title,className:"activity-count"},a.default.createElement(c.icon,null,c.label),a.default.createElement("span",null," "),a.default.createElement("span",{className:"count"},(0,F.capInt)(d,99))):null},P=function(c){var d=c.currentUser,e=c.pullRequest;c=e.fromRef;var b=e.reviewers;e=e.state;b=(0,v.find)(b,function(a){return d.name===a.user.name});return e===D.PullRequestState.OPEN&&b&&b.lastReviewedCommit!==c.latestCommit?a.default.createElement(q.CommitsIcon,
{title:l.I18n.getText("bitbucket.web.dashboard.pullrequests.newcommits.title")},l.I18n.getText("bitbucket.web.dashboard.pullrequests.newcommits")):null};f=function(c){function d(){babelHelpers.classCallCheck(this,d);return babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}babelHelpers.inherits(d,c);babelHelpers.createClass(d,[{key:"shouldComponentUpdate",value:function(a){return a.focused!==this.props.focused||this.props.pullRequest!==a.pullRequest}},
{key:"componentDidUpdate",value:function(a){var b=(0,x.findDOMNode)(this).querySelector(".title a");b.blur();this.props.focused&&a.focusedPullRequestIndex!==this.props.focusedPullRequestIndex&&b.focus()}},{key:"render",value:function(){var e=this.props,b=e.pullRequest,c=e.onItemClick,d=e.webSections,h=e.showStateLozenge;e=e.focused;var f=b.author,k=b.toRef,g=b.properties,n=g.commentCount;n=void 0===n?0:n;g=g.openTaskCount;g=void 0===g?0:g;var p=k.repository;k=k.repository.project;var m=(0,r.getCurrentUser)();
return a.default.createElement("tr",{className:(0,H.default)({focused:e})},a.default.createElement(J.default,{author:b.author}),a.default.createElement("td",{className:"summary"},a.default.createElement("div",{className:"title"},h?a.default.createElement(N.default,{pullRequest:b}):null,a.default.createElement("a",{href:I.default.project(k).repo(p).pullRequest(b).build(),onClick:function(a){return c(a)},"data-pull-request-id":b.id,"data-repository-id":p.id,"data-project-id":k.id},b.title)),a.default.createElement("div",
{className:"meta"},a.default.createElement("span",{title:f.user.displayName,className:"author"},f.user.displayName),a.default.createElement("span",{className:"pull-request-id"},"#",b.id),a.default.createElement("span",{title:k.name+" / "+p.name,className:"project-and-repository"},a.default.createElement("span",{className:"project-name"},k.name),a.default.createElement("span",{className:"separator"}," / "),a.default.createElement("span",{className:"name"},p.name)),a.default.createElement(M.default,
{scmRef:b.toRef}))),a.default.createElement(K.default,{pullRequest:b}),a.default.createElement("td",{className:"activity new-commits"},a.default.createElement(P,{currentUser:m,pullRequest:b})),a.default.createElement("td",{className:"activity"},a.default.createElement(t,{count:n,icon:q.CommentIcon,title:l.I18n.getText("bitbucket.web.comment.count",n),label:l.I18n.getText("bitbucket.web.comment.label")})),a.default.createElement("td",{className:"activity"},a.default.createElement(t,{count:g,icon:q.TaskIcon,
title:l.I18n.getText("bitbucket.web.tasks.openTaskCount",g),label:l.I18n.getText("bitbucket.web.tasks.openTask.label")})),a.default.createElement(L.default,{pullRequest:b,currentUser:(0,r.getCurrentUser)(),maxOpen:O}),d.map(function(c){return a.default.createElement(G.WebSectionCell,{key:c.key,webSection:c,pullRequest:b})}))}}]);return d}(f.Component);f.propTypes={pullRequest:h.default.object.isRequired,onItemClick:h.default.func.isRequired,focusedPullRequestIndex:h.default.number.isRequired};m.default=
f;u.exports=m["default"]});
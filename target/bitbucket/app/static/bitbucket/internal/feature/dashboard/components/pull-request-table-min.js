define("bitbucket/internal/feature/dashboard/components/pull-request-table","exports @atlassian/aui classnames prop-types react bitbucket/internal/bbui/aui-react/spinner bitbucket/internal/bbui/utils/pull-request-unique-id bitbucket/internal/util/analytics bitbucket/internal/util/client-storage bitbucket/internal/widget/icons/icons ../pull-request-type ./pull-request-row ./pull-request-table-web-section".split(" "),function(e,b,w,x,g,y,z,A,B,r,h,C,m){Object.defineProperty(e,"__esModule",{value:!0});
e.PullRequestTable=e.PullRequestEmptyState=e.CountTitleDisplay=e.LoadMoreButton=void 0;var f=babelHelpers.interopRequireDefault(b),u=babelHelpers.interopRequireDefault(w);b=babelHelpers.interopRequireDefault(x);var d=babelHelpers.interopRequireDefault(g),D=babelHelpers.interopRequireDefault(y),k=babelHelpers.interopRequireDefault(z),n=babelHelpers.interopRequireDefault(A),p=babelHelpers.interopRequireDefault(B),E=babelHelpers.interopRequireDefault(C),l,v=(0,m.getWebSections)(),F=babelHelpers.defineProperty({},
h.CLOSED,f.default.I18n.getText("bitbucket.web.dashboard.pullrequests.closed.tooltip")),G=(l={},babelHelpers.defineProperty(l,h.REVIEWING,f.default.I18n.getText("bitbucket.web.dashboard.pullrequests.reviewing.empty")),babelHelpers.defineProperty(l,h.CREATED,f.default.I18n.getText("bitbucket.web.dashboard.pullrequests.created.empty")),babelHelpers.defineProperty(l,h.CLOSED,f.default.I18n.getText("bitbucket.web.dashboard.pullrequests.closed.empty")),l),H=babelHelpers.defineProperty({},h.CREATED,f.default.I18n.getText("bitbucket.web.dashboard.pullrequests.created.empty.description")),
I=e.LoadMoreButton=function(c){var b=c.onClick;return d.default.createElement("button",{className:"aui-button aui-button-link",type:"button",onClick:function(){return b()}},f.default.I18n.getText("bitbucket.web.dashboard.pullrequests.loadmore"))},J=e.CountTitleDisplay=function(c){return d.default.createElement("span",null,c.title,d.default.createElement("span",{className:"aui-badge",title:c.collapsedCountTooltip},c.lozengeDisplayCount))},K=e.PullRequestEmptyState=function(c){var b=c.message;c=c.description;
return d.default.createElement("div",{className:"pull-request-list-empty-state"},d.default.createElement(r.ApproveIcon,null),d.default.createElement("p",{className:"pull-request-empty-state-title"},b),c&&d.default.createElement("p",{className:"pull-request-empty-state-description"},c))},N=e.PullRequestTable=function(c){var b=c.pullRequests,a=c.showStateLozenge,L=c.onItemClick,e=c.focusedPullRequest,M=c.focusedPullRequestIndex;return d.default.createElement("table",{className:(0,u.default)("aui table",
"dashboard-pull-requests-table")},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{className:"header-summary",scope:"col",colSpan:"6"},"\u00a0"),d.default.createElement("th",{className:"reviewers"},f.default.I18n.getText("bitbucket.web.dashboard.pullrequests.heading.reviewers")),v.map(function(a){return d.default.createElement(m.WebSectionHeader,{key:a.key,webSection:a})}))),d.default.createElement("tbody",null,b.map(function(b){return d.default.createElement(E.default,
{key:(0,k.default)(b),focused:(0,k.default)(b)===(0,k.default)(e),focusedPullRequestIndex:M,pullRequest:b,onItemClick:function(a){return L(a)},webSections:v,showStateLozenge:a})})))};g=function(b){function c(a){babelHelpers.classCallCheck(this,c);var b=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));b.CLIENT_STORAGE_KEY=p.default.buildKey(["dashboard","pull-requests",a.type,"table","collapsed"],"user");b.state={collapsed:!!a.collapsible&&!1!==p.default.getItem(b.CLIENT_STORAGE_KEY)};
return b}babelHelpers.inherits(c,b);babelHelpers.createClass(c,[{key:"componentDidMount",value:function(){this.props.collapsible&&n.default.add("dashboard.pullrequest-list."+this.props.type.toLowerCase()+".collapsed.initial",{collapsed:this.state.collapsed})}},{key:"collapsedDisplay",value:function(a){var b=this,c=a.title,e=a.collapsedCountTooltip;a=a.lozengeDisplayCount;return d.default.createElement("button",{onClick:function(a){a.preventDefault();b.toggleTableCollapsed()},className:"table-expander",
href:"#"},d.default.createElement(r.ChevronRightIcon,null),c,d.default.createElement("span",{className:"aui-badge",title:e},a))}},{key:"toggleTableCollapsed",value:function(){var a=!this.state.collapsed;this.setState({collapsed:a});p.default.setItem(this.CLIENT_STORAGE_KEY,a);n.default.add("dashboard.pullrequest-list."+this.props.type.toLowerCase()+".collapsed.toggle",{collapsed:a})}},{key:"render",value:function(){var a=this.props,b=a.type,c=a.title,e=a.pullRequests,f=a.loading,g=a.lozengeDisplayCount,
h=a.onLoadMoreClick,k=a.onItemClick,l=a.showStateLozenge,t=a.collapsible,p=a.focusedPullRequest,r=a.focusedPullRequestIndex;a=a.hasMore?d.default.createElement(I,{onClick:function(){return h()}}):null;var q=e.length;t=q?t:!1;var m=F[b],n=t&&this.state.collapsed;return d.default.createElement("div",{className:(0,u.default)("dashboard-pull-requests-table-container","dashboard-pull-requests-table-"+b.toLowerCase(),{collapsed:n,"dashboard-pull-requests-empty":!q}),"aria-hidden":n},d.default.createElement("h4",
null,q&&t?this.collapsedDisplay({title:c,collapsedCountTooltip:m,lozengeDisplayCount:g}):q?d.default.createElement(J,{title:c,collapsedCountTooltip:m,lozengeDisplayCount:g}):c),q?d.default.createElement(N,{pullRequests:e,showStateLozenge:l,onItemClick:k,focusedPullRequest:p,focusedPullRequestIndex:r}):d.default.createElement(K,{message:G[b],description:H[b]}),d.default.createElement("div",{className:"more-container"},f?d.default.createElement(D.default,null):a))}}],[{key:"getDerivedStateFromProps",
value:function(a,b){var c=a.pullRequests;a=a.focusedPullRequest;if(!a||!b.collapsed)return null;var d=(0,k.default)(a);return c.some(function(a){return(0,k.default)(a)===d})?{collapsed:!1}:null}}]);return c}(g.Component);g.propTypes={type:b.default.string.isRequired,title:b.default.string.isRequired,pullRequests:b.default.array.isRequired,lozengeDisplayCount:b.default.string.isRequired,loading:b.default.bool,hasMore:b.default.bool,onLoadMoreClick:b.default.func.isRequired,onItemClick:b.default.func.isRequired,
showStateLozenge:b.default.bool,collapsible:b.default.bool,focusedPullRequest:b.default.object,focusedPullRequestIndex:b.default.number.isRequired};e.default=g});
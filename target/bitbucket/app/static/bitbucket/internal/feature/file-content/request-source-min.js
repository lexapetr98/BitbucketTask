define("bitbucket/internal/feature/file-content/request-source","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/ajax bitbucket/internal/util/property".split(" "),function(k,e,l,m,n,p,q){function r(b,a){a=f.default.extend({},{start:a.start||0,limit:a.limit||g,blame:a.includeBlame?!0:void 0});return t.default.rest().currentRepo().browse().path(b.path).at(b.commitRange.untilRevision.displayId).withParams(a).build()}Object.defineProperty(e,"__esModule",{value:!0});var f=
babelHelpers.interopRequireDefault(l),u=babelHelpers.interopRequireDefault(m),t=babelHelpers.interopRequireDefault(n),h=babelHelpers.interopRequireDefault(p),g=5E3;babelHelpers.interopRequireDefault(q).default.getFromProvider("page.max.source.lines").done(function(b){g=b});var d={};e.default=function(b,a){a=a||{};b=b.toJSON?b.toJSON():b;var c=r(b,a);if(d.hasOwnProperty(c)&&"rejected"!==d[c].state())return d[c];a=h.default.rest({url:c,statusCode:a.statusCode||h.default.ignore404WithinRepository()});
b=a.then(function(a){if(a.errors&&a.errors.length)return f.default.Deferred().rejectWith(this,[this,null,null,a]);u.default.defer(function(){delete d[c]});return a});d[c]=b.promise(a);return d[c]};k.exports=e["default"]});
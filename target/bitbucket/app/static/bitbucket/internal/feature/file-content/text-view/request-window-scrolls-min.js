define("bitbucket/internal/feature/file-content/text-view/request-window-scrolls","module exports baconjs jquery lodash bitbucket/internal/util/bacon bitbucket/internal/util/performance bitbucket/internal/util/region-scroll-forwarder bitbucket/internal/util/request-page-scrolling bitbucket/internal/util/scroll".split(" "),function(g,c,h,t,u,v,w,x,y,z){Object.defineProperty(c,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(h),A=babelHelpers.interopRequireDefault(t),B=babelHelpers.interopRequireDefault(u),
l=babelHelpers.interopRequireDefault(v),C=babelHelpers.interopRequireDefault(w),D=babelHelpers.interopRequireDefault(x),E=babelHelpers.interopRequireDefault(y),F=babelHelpers.interopRequireDefault(z);c.default=function(a,d){return(0,E.default)().done(function(e){function c(a){if(a.wheelDeltaX&&a.wheelDeltaY){if(Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)){var b=d.scrollSizing();d.scroll(b.left-a.wheelDeltaX*f,null)}else m.scrollTop(m.scrollTop()+a.wheelDeltaY*f);a.stopImmediatePropagation();a.preventDefault()}}
var n=new k.default.Bus,b=a._$container.addClass("full-window-scrolling"),g=b.closest(".file-content"),p,h=F.default.fakeScroll(b[0]);b=k.default.mergeAll(["bitbucket.internal.feature.sidebar.expandEnd","bitbucket.internal.feature.sidebar.collapseEnd","bitbucket.internal.feature.commit.difftree.collapseAnimationFinished","bitbucket.internal.layout.body.resize"].map(l.default.events).concat(l.default.getWindowSizeProperty().toEventStream())).toProperty();a._addDestroyable(e);a._addDestroyable(b.scan(0,
function(a,b){return b&&b.hasOwnProperty("width")&&b.hasOwnProperty("height")&&b||a}).filter(B.default.identity).onValue(function(b){p=b.height-a._$fileToolbar.outerHeight();d.resize(a._$container.width(),p)}));b=C.default.enqueueCapped(a._whenOpDone.bind(a),function(){a._$container&&e.refresh()});d.onSizeChange(b);a.on("widgetAdded",b);a.on("widgetChanged",b);a.on("widgetCleared",b);a.on("internal-change",b);if(a._options.commentContext)a._options.commentContext.on("fileCommentsResized",b);b=new D.default(n,
[{id:"file-comments-and-messages",getHeight:function(){return a._editorInnerOffset()||0},setScrollTop:function(a){h(0,a)}},{id:"editors",getHeight:function(){return Infinity},setScrollTop:function(a){d.scroll(null,a)}}]);a._addDestroyable(b);if(a._options.commentContext)a._options.commentContext.on("fileCommentsResized",b.heightsChanged.bind(b));e.setTarget({scrollSizing:function(){var b=d.scrollSizing();return{height:b.height+a._editorInnerOffset(),clientHeight:b.clientHeight}},offset:function(){return g.offset()},
scroll:function(a,b){null!=b&&n.push({top:b})}});b=/Chrome\//.test(window.navigator.userAgent);var q=/Apple Computer/.test(window.navigator.vendor),r=a._$container[0],m=(0,A.default)(window),f=1;b?f=-.7:q&&(f=-1/3);if(b||q)r.addEventListener("mousewheel",c,!0),e.destroyables.push({destroy:function(){r.removeEventListener("mousewheel",c,!0)}})})};g.exports=c["default"]});
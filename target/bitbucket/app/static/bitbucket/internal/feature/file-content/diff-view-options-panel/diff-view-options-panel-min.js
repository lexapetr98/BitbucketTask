define("bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel","module exports @atlassian/aui chaperone jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/shortcuts".split(" "),function(m,b,a,k,n,p,q,r,t){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,e){function f(c){"false"===a.find("#diff-options-dropdown").attr("aria-hidden")&&a.find(u).trigger("aui-button-invoke")}function b(c){f();e.set(c,
!e.get(c))}var d=[];d.push(g.default.bind("requestIgnoreWhitespace",b.bind(null,"ignoreWhitespace")));d.push(g.default.bind("requestHideComments",b.bind(null,"hideComments")));d.push(g.default.bind("requestHideEdiff",b.bind(null,"hideEdiff")));d.push(g.default.bind("changeDiffTypeRequested",function(){f();e.set("diffType","unified"===e.get("diffType")?"side-by-side":"unified")}));d.push(l.default.chainWith(a).on("aui-dropdown2-item-check aui-dropdown2-item-uncheck","#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio",
function(c){f();var a=(0,h.default)(this),b=a.attr("data-key"),d=a.attr("data-value");c="aui-dropdown2-item-check"===c.type;!c&&a.hasClass("aui-dropdown2-radio")||e.set(b,d||c)}).on("aui-dropdown2-show","#diff-options-dropdown",function(a){d.push(l.default.chain().on("window.scroll.throttled",f).destroy)}).on("aui-dropdown2-hide","#diff-options-dropdown",function(a){l.default.off("window.scroll.throttled",f)}).destroy);(function(){(0,h.default)("#diff-options-dropdown").find("#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio").each(function(){var a=
(0,h.default)(this),b=a.attr("data-key"),d=a.attr("data-value"),c=e.get(b);b=void 0===c?v[b]===d:c===d||!0===c;a.toggleClass("aui-dropdown2-checked checked",!!b).attr("aria-checked",!!b)});var a=(0,h.default)('.diff-type-options .aui-dropdown2-radio[data-value\x3d"side-by-side"]');"unified"!==e.getOverrides().diffType?a.removeClass("aui-dropdown2-disabled").attr("aria-disabled",!1):a.tooltip({gravity:"e",delayIn:0,title:"data-file-type-compatibility"})})();return{destroy:w.default.partial(x.default.applyAll,
d)}};a=babelHelpers.interopRequireDefault(a);k=babelHelpers.interopRequireDefault(k);var h=babelHelpers.interopRequireDefault(n),w=babelHelpers.interopRequireDefault(p),l=babelHelpers.interopRequireDefault(q),x=babelHelpers.interopRequireDefault(r),g=babelHelpers.interopRequireDefault(t),u="#diff-options-dropdown-trigger";k.default.registerFeature("side-by-side-diff-discovery",[{id:"side-by-side-diff-discovery",selector:".diff-view-options",title:a.default.I18n.getText("bitbucket.web.diff.sidebyside.feature.discovery.title"),
content:a.default.escapeHtml(a.default.I18n.getText("bitbucket.web.diff.sidebyside.feature.discovery.content")),width:330,alignment:"bottom right",once:!0}]);var v={diffType:"unified"};m.exports=b["default"]});
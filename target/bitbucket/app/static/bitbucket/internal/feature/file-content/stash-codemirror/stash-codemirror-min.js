define("bitbucket/internal/feature/file-content/stash-codemirror/stash-codemirror","module exports @atlassian/aui codemirror jquery lodash bitbucket/internal/feature/file-content/editor-mode bitbucket/internal/util/function bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar".split(" "),function(x,m,n,y,z,p,A,B){function C(a){a.on("keydown",function(b,a){!1!==b.options.readOnly&&33<=a.which&&40>=a.which&&!a.shiftKey&&!b.somethingSelected()&&(37>a.which&&a.preventDefault(),b.getInputField().blur())})}
function D(a){var b=!1,e=f.default.lazyDelay(function(){if(!b){var c=a.lineAtHeight(a.getScrollInfo().top+a.heightAtLine(0));a.setSelection({line:c+1,ch:0})}b=!1},10);a.on("contextmenu",function(){b=!0});a.on("blur",function(a){a.options.readOnly&&a.somethingSelected()&&e();b=!1})}function q(a,b){b=b===h.default.EDIT?"off":"on";a[b]("keydown",r);a[b]("keypress",r)}function r(a,b){a=d.default.assign(g.default.Event(b.type),d.default.pick(b,E));(0,g.default)(document).trigger(a);b.codemirrorIgnore=
!!t[b.which||b.keyCode]}function F(a){var b={},e=Array.prototype.slice.call(arguments,1),c=f.default.spread(function(c,u){b[c]=void 0!==u?d.default.flow(a[c].bind(a),f.default.constant(u)):a[c].bind(a)});e.forEach(f.default.unary(c));return b}function G(a,b){d.default.forEach(b,function(b,c){return a.setOption(c,b)})}function v(a,b){this.options=b;var e=g.default.extend({mode:"text/plain",scrollbarStyle:b.scrollStyle?"stash-"+b.scrollStyle:"native",styleSelectedText:!0,stashDestroyables:[],theme:"stash-default"},
{viewportMargin:b&&b.autoResizing?Infinity:50},w[b.editorMode||h.default.READONLY],b),c=b.fromTextArea?k.default.fromTextArea(a,e):new k.default(a,e);(0,g.default)(c.getWrapperElement()).find(".CodeMirror-lines, .CodeMirror-code").attr("data-skate-ignore","true");(0,p.get)(b,"autoResizing")&&((0,p.get)(b,"fromTextArea")?a.parentNode.classList.add("codemirror-auto-resizing-container"):a.classList.add("codemirror-auto-resizing-container"));C(c);q(c,b.editorMode);D(c);a=F(c,["addLineClass",this],"addLineWidget",
"charCoords","clearGutter","defaultTextHeight","execCommand","focus","getDoc","getInputField","getLine","getLineHandle","getLineNumber","getOption","getScrollInfo","getScrollerElement","getGutterElement","getWrapperElement","heightAtLine","lastLine","lineAtHeight","setCursor",["markText",this],["off",this],["on",this],["refresh",this],["removeLineClass",this],"replaceRange",["scrollIntoView",this],["scrollTo",this],["setGutterMarker",this],["setOption",this],["setSelection",this],["setValue",this],
"swapDoc");g.default.extend(this,a);this.operation=function(b){c.operation(f.default.unary(d.default.partial(b,this)));return this};this.destroy=function(){d.default.invokeMap(c.getOption("stashDestroyables"),"destroy");(0,g.default)(c.getWrapperElement()).remove()};this._highlight=function(b){k.default.commands.highlight(c,b)};this._insert=function(b,a,e){var d=0===a;--a;var g=c.getOption("wholeLineUpdateBefore");c.setOption("wholeLineUpdateBefore",d);var f=c.getDoc(),h={line:a,ch:d?0:c.getLine(a).length};
f.replaceRange(d?b+"\r\n":"\r\n"+b,h);e&&f.setSelection({line:a,ch:0});c.setOption("wholeLineUpdateBefore",g)};this.switchEditorMode=function(a){var d=babelHelpers.extends({scrollbarStyle:this.options.scrollStyle?"stash-"+b.scrollStyle:"native"},w[a]);G(c,d);q(c,a)};return this}Object.defineProperty(m,"__esModule",{value:!0});n=babelHelpers.interopRequireDefault(n);var k=babelHelpers.interopRequireDefault(y),g=babelHelpers.interopRequireDefault(z),d=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(A),
f=babelHelpers.interopRequireDefault(B),l;k.default.defineOption("stashDestroyables",null);var t={};t[n.default.keyCode.TAB]=!0;var E=["which","keyCode","shiftKey","ctrlKey","metaKey"],w=(l={},babelHelpers.defineProperty(l,h.default.READONLY,{lineSeparator:"\r\n",readOnly:!0,lineNumbers:!1,wholeLineUpdateBefore:!1,keyMap:"default",cursorBlinkRate:0}),babelHelpers.defineProperty(l,h.default.EDIT,{lineSeparator:null,readOnly:!1,lineNumbers:!0,wholeLineUpdateBefore:!0,scrollbarStyle:"native",keyMap:"sublime",
cursorBlinkRate:530}),l);v.DEFAULT_LINE_ENDING="\r\n";m.default=v;x.exports=m["default"]});
define("bitbucket/internal/feature/commit-graph/graph-builder",["exports","lodash"],function(g,k){Object.defineProperty(g,"__esModule",{value:!0});g.buildGraph=function(a){var f=1,b={},e={},c=[];return a.map(function(a){var d=a.id,g=a.parents;c.includes(d)||(b[d]=c.length,e[d]=f++,c.push(d));a=b[d];var m=e[d];delete e[d];var h=g.map(function(a){a=a.id;if(!c.includes(a))return a}).filter(function(a){return a}),l=n(c,h,a);b=p(l,parseInt);h.forEach(function(a,b){e[a]=0===b?m:f++});h=(0,k.flatMap)(c,
function(a,c){if(l.includes(a))return{startColumn:c,endColumn:b[a],color:e[a]};if(a===d)return g.map(function(a){a=a.id;return{startColumn:c,endColumn:b[a],color:e[a]}})});c=l;return{id:d,column:a,color:m,segments:h}})};var n=function(a,f,b){return[].concat(a.slice(0,b),f,a.slice(b+1,a.length))},p=function(a){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(a){return a};return(0,k.fromPairs)((0,k.map)(a,function(a,e){return[a,f(e)]}))}});
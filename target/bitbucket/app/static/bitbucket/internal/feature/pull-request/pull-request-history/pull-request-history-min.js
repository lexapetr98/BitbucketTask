define("bitbucket/internal/feature/pull-request/pull-request-history/pull-request-history","module exports jquery lodash bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(q,e,r,k,t,u,v){function l(a){f(a.$tree)}function f(a){a.find(".jstree-leaf").each(function(a,g){a=(0,w.default)(g);m(a).isViewed&&a.addClass("viewed")})}function n(a){var b=m(a),g=b.update;b.isViewed||(h.default.setItem(d,g(c)),a.addClass("viewed"))}
function m(a){var b=a.data("diffViewType"),g=a.data("path").toString,d=g+":contentIds",e=a.data("contentId");a=a.data("fromContentId");var f=e+":"+a;a=void 0;a=p.default.EFFECTIVE===b?c[g]===e:c[d]&&(0,k.includes)(c[d],f);return{isViewed:a,update:function(a){p.default.EFFECTIVE===b&&(a[g]=e);var c=a[d]||[];(0,k.includes)(c,f)||c.push(f);a[d]=c;return a}}}Object.defineProperty(e,"__esModule",{value:!0});var w=babelHelpers.interopRequireDefault(r),p=babelHelpers.interopRequireDefault(t),h=babelHelpers.interopRequireDefault(u),
b=babelHelpers.interopRequireDefault(v),d=void 0,c=void 0;e.default={init:function(){d=h.default.buildKey("history","pull-request");c=h.default.getItem(d)||{};b.default.on("bitbucket.internal.feature.commit.difftree.treeInitialised",l);b.default.on("bitbucket.internal.feature.commit.difftree.nodeOpening",f);b.default.on("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",n)},reset:function(){c=d=null;b.default.off("bitbucket.internal.feature.commit.difftree.treeInitialised",l);b.default.off("bitbucket.internal.feature.commit.difftree.nodeOpening",
f);b.default.off("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",n)}};q.exports=e["default"]});
define("bitbucket/internal/feature/pull-request/action-creators/change-reviewer-status","module exports lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/actions/pull-request bitbucket/internal/enums bitbucket/internal/model/pull-request-json".split(" "),function(l,f,m,n,p,q,r,t,g){function u(a){function b(b,c){h.default.trigger(b,null,k.default.merge(a,{approved:c,pullRequest:(0,g.filter)(a.pullRequest)}))}if(a.newStatus!==e.default.ApprovalStatus.APPROVED&&
a.oldStatus!==e.default.ApprovalStatus.APPROVED)a.request.then(function(){var c=a.newStatus===e.default.ApprovalStatus.NEEDS_WORK;b("bitbucket.internal.widget.needs-work."+(c?"added":"removed"),c)});else{var c=a.newStatus===e.default.ApprovalStatus.APPROVED,d=c?{ing:"bitbucket.internal.widget.approve-button.adding",ed:"bitbucket.internal.widget.approve-button.added",failed:"bitbucket.internal.widget.approve-button.add.failed"}:{ing:"bitbucket.internal.widget.approve-button.removing",ed:"bitbucket.internal.widget.approve-button.removed",
failed:"bitbucket.internal.widget.approve-button.remove.failed"};b(d.ing,c);a.request.then(function(){b(d.ed,c)},function(){b(d.failed,!c)})}}Object.defineProperty(f,"__esModule",{value:!0});f.default=function(a){var b=a.pullRequest.toRef.repository,c=b.project,d=a.user;b=v.default.rest({type:"PUT",url:w.default.rest().project(c).repo(b).pullRequest(a.pullRequest).participants(d).withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}).build(),data:{status:a.newStatus}});
a=k.default.merge(a,{request:b,prId:Number(a.pullRequest.id),user:d});u(a);return{type:r.PR_CHANGE_REVIEWER_STATE,payload:{pullRequest:a.pullRequest,user:a.user,newState:a.newStatus},meta:{promise:b.then(function(b){h.default.trigger("bitbucket.internal.feature.pullRequest.reviewerStatus.changed",null,{pullRequest:(0,g.filter)(a.pullRequest),user:b.user,newState:b.status,oldState:a.oldStatus});return{pullRequest:a.pullRequest,user:b.user,newState:b.status}})}}};var k=babelHelpers.interopRequireDefault(m),
h=babelHelpers.interopRequireDefault(n),w=babelHelpers.interopRequireDefault(p),v=babelHelpers.interopRequireDefault(q),e=babelHelpers.interopRequireDefault(t);l.exports=f["default"]});
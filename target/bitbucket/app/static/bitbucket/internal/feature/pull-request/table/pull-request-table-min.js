define("bitbucket/internal/feature/pull-request/table/pull-request-table","module exports @atlassian/aui jquery lodash bitbucket/internal/util/shortcuts bitbucket/internal/widget/paged-table/paged-table".split(" "),function(m,g,h,k,n,p,e){Object.defineProperty(g,"__esModule",{value:!0});h=babelHelpers.interopRequireDefault(h);var f=babelHelpers.interopRequireDefault(k);k=babelHelpers.interopRequireWildcard(p);e=babelHelpers.interopRequireDefault(e);var q=k.createKeyboardShortcutsHandler;e=function(e){function c(a,
b){babelHelpers.classCallCheck(this,c);var d=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,babelHelpers.extends({},c.defaults,b)));if((0,n.isFunction)(d.options.onClick))d.$table.on("click",d.options.rowSelector+" a:first",function(a){a=(0,f.default)(a.target).closest(d.options.rowSelector);a=d.$table.find(d.options.rowSelector).index(a);d.options.onClick({rowIndex:a})});d.pullRequestsNavBuilder=a;return d}babelHelpers.inherits(c,e);babelHelpers.createClass(c,
[{key:"buildUrl",value:function(a,b){return this.pullRequestsNavBuilder.withParams({start:a,limit:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"})}).build()}},{key:"focusInitialRow",value:function(){var a=this.options,b=a.focusedClass;this.$table.find(a.rowSelector+":first").addClass(b).find("a:first").focus()}},{key:"attachNewContent",value:function(a,b){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"attachNewContent",this).call(this,a,b);a=0===
a.start;this.initTooltips();a&&this.focusInitialRow()}},{key:"handleNewRows",value:function(a,b){a=(0,f.default)(a.values.map(function(a){return bitbucket.internal.feature.pullRequest.pullRequestRow({pullRequest:a})}).join(""));this.$table.show().children("tbody")["html"!==b?b:"append"](a)}},{key:"initTooltips",value:function(){this.$table.find(".aui-avatar \x3e .aui-avatar-inner \x3e img").tooltip({hoverable:!1,offset:5,delayIn:0,gravity:function(){return f.default.fn.tipsy.autoNS.call(this)+f.default.fn.tipsy.autoWE.call(this)},
live:!0})}},{key:"initShortcuts",value:function(a){var b=this,d,l=a.nextItemKey,c=a.prevItemKey;c=void 0===c?"k":c;a=a.openItemKey;a=void 0===a?"o":a;var e=this.options,g=e.rowSelector;e=e.focusedClass;this.shorcutsListener=q((d={},babelHelpers.defineProperty(d,void 0===l?"j":l,function(){return b.moveToNextItem()}),babelHelpers.defineProperty(d,c,function(){return b.moveToPrevItem()}),babelHelpers.defineProperty(d,a,function(){return b.openFocusedItem()}),d));(0,f.default)(g).first().addClass(e);
window.addEventListener("keypress",this.shorcutsListener,!0)}},{key:"removeShortcuts",value:function(){window.removeEventListener("keypress",this.shorcutsListener,!0)}},{key:"moveToNextItem",value:function(){this.handleRowFocusChange(function(a){var b=a.index;return b<a.rowsSize-1?b+1:b})}},{key:"moveToPrevItem",value:function(){this.handleRowFocusChange(function(a){a=a.index;return 0<a?a-1:a})}},{key:"handleRowFocusChange",value:function(a){var b=this.options,d=b.focusedClass,c=this.$table.find(b.rowSelector);
b=c.filter("."+d);var e=f.default.inArray(b.get(0),c);a=a({index:e,rowsSize:c.length});c=c.eq(a);a!==e&&(c.addClass(d),b.removeClass(d),c.find("a:first").focus())}},{key:"openFocusedItem",value:function(){var a=this.options;this.$table.find(a.rowSelector+"."+a.focusedClass).find("a:first")[0].click()}}]);return c}(e.default);e.defaults={allFetchedMessageHtml:bitbucket.internal.widget.paragraph({extraClasses:"no-more-results",text:h.default.I18n.getText("bitbucket.web.pullrequest.allfetched")}),bufferPixels:150,
target:"#pull-requests-table",tableMessageClass:"pull-request-table-message",paginationContext:"pull-request-table",pageSize:25,noneFoundMessageHtml:bitbucket.internal.feature.pullRequest.pullRequestTableEmpty(),rowSelector:".pull-request-row",focusedClass:"focused"};g.default=e;m.exports=g["default"]});
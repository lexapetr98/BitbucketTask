define("bitbucket/internal/feature/discussion/participants-list/participants-list",["module","exports","@atlassian/aui","lodash"],function(d,c,e,f){function b(a,b,c){this.$list=b;this.$container=c;this.participants=a;g.default.bindAll(this,"addedParticipantHandler","approvalHandler");a.on("change:approved",this.approvalHandler);a.on("add",this.addedParticipantHandler)}Object.defineProperty(c,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(e),g=babelHelpers.interopRequireDefault(f);
b.prototype.addedParticipantHandler=function(a){this.$list.append("\x3cli\x3e"+bitbucket.internal.widget.avatarList.participantAvatar({participant:a.toJSON(),extraClasses:"participant-item",withName:!0})+"\x3c/li\x3e");a=this.$container.find(".count");if(a.length){var b=parseInt(a.text(),10);1===b&&this.$container.find(".label").text(h.default.I18n.getText("bitbucket.web.discussion.participants.label.plural"));a.text(++b)}else this.$container.find(".participants-trigger").prepend(bitbucket.internal.feature.discussion.participantCount({count:1}));
this.$container.removeClass("hidden")};b.prototype.approvalHandler=function(a){this.$list.find(".user-avatar[data-username\x3d'"+a.getUser().getName()+"']").toggleClass("badge-hidden",!a.getApproved())};b.prototype.destroy=function(){this.participants.off("add",this.addedParticipantHandler);this.participants.off("change:approved",this.approvalHandler)};c.default=b;d.exports=c["default"]});
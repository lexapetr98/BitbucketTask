define("bitbucket/internal/page/repository/settings/general/repository-settings","module exports @atlassian/aui jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/feature/project/project-selector/project-selector bitbucket/internal/feature/repository/branch-selector/branch-selector bitbucket/internal/feature/repository/cloneUrlGen/cloneUrlGen bitbucket/internal/model/page-state bitbucket/internal/util/error bitbucket/internal/util/notifications/notifications bitbucket/internal/util/set-dialog-buttons-disabled bitbucket/internal/widget/confirm-dialog/confirm-dialog bitbucket/internal/widget/submit-spinner/submit-spinner".split(" "),
function(t,h,f,u,v,w,x,y,z,A,B,C,D,E,F,G){function H(){function b(){var a=d.$el.find("#moveName").val(),b=k.getSelectedItem().toJSON();if(a===g.default.getRepository().getName()&&b.key===g.default.getProject().getKey())d.hide();else{(0,p.default)(d,!0);var c=new I.default(d.$el.find(".move-button"),"before");c.show();m.default.rest({type:"PUT",url:l.default.rest().currentRepo().build(),data:{name:a,project:b},statusCode:{400:!1,409:!1}}).done(function(a){var b=a.name,c=a.slug,d=a.project;a=d.name;
d=d.key;n.default.addFlash(d===g.default.getProject().getKey()?f.I18n.getText("bitbucket.web.repository.rename.success",g.default.getRepository().getName(),b):f.I18n.getText("bitbucket.web.repository.move.success",b,a));location.href=l.default.project(d).repo(c).settings().build()}).fail(function(a,b,c,e){q.default.setFormErrors(d.$el.find("form.aui"),J.default.chain(e.errors).reject({context:"slug"}).map(function(a){var b=a.context;if("project"===b||"name"===b)a.context="move"+b.charAt(0).toUpperCase()+
b.slice(1);return a}).value())}).always(function(){(0,p.default)(d,!1);c.hide()})}}var a=bitbucket.internal.page.moveRepositoryForm({repository:g.default.getRepository().toJSON()}),c=aui.buttons.button({text:f.I18n.getText("bitbucket.web.button.move"),extraClasses:["button","move-button"]}),e=aui.buttons.button({text:f.I18n.getText("bitbucket.web.button.cancel"),type:"link",extraClasses:"cancel-button"}),d=(0,f.dialog2)(aui.dialog.dialog2({id:"repository-move-dialog",titleText:f.I18n.getText("bitbucket.web.repository.move.title"),
content:a,headerActionContent:'\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e',footerActionContent:c+e}));a=d.$el.find("#moveProjectSelector");var k=new K.default(a,{field:a.next("input")});c=d.$el.find("#moveName");e=d.$el.find(".clone-url-generated span");r.default.bindUrlGeneration(e,{elementsToWatch:[c,a],getProject:k.getSelectedItem.bind(k),getRepoName:c.val.bind(c)});d.$el.find("form.aui").on("submit",function(a){a.preventDefault();b()});d.$el.find(".move-button").click(b);d.$el.find(".cancel-button").click(function(){k.dialog.hide();
d.hide()});return d}function L(b){var a=void 0;(0,e.default)(b).on("click",function(b){b.preventDefault();a||(a=H());a.show();q.default.clearFormErrors(a.$el)})}function M(b){var a=g.default.getRepository().toJSON(),c=new N.default({id:"delete-repository-dialog",titleText:f.I18n.getText("bitbucket.web.repository.delete.title"),titleClass:"warning-header",panelContent:bitbucket.internal.page.deleteRepositoryDialog({repository:a}),submitText:f.I18n.getText("bitbucket.web.button.delete"),height:240,
focusSelector:".cancel-button"},{type:"DELETE"});c.attachTo(b);c.addConfirmListener(function(c){c.then(function(c,g,h){return m.default.poll({url:(0,e.default)(b).attr("href"),statusCode:{404:function(){n.default.addFlash(f.I18n.getText("bitbucket.web.repository.deleted",a.name));window.location=l.default.currentProject().build();return!1}}})})})}function O(b){var a=b.find(".size-load-button");a.click(function(c){c.preventDefault();a.remove();P(b)})}function P(b){var a=b.find(".spinner").spin();m.default.rest({type:"GET",
url:l.default.currentRepo().sizes().build(),statusCode:{"*":!1}}).always(function(){a.remove()}).done(function(a){b.html(bitbucket.internal.page.repositorySizeDisplay(a))}).fail(function(){var a=bitbucket.internal.page.repositoryInlineError({message:f.I18n.getText("bitbucket.web.repository.size.error")});(0,e.default)(a).insertAfter(b)})}Object.defineProperty(h,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(u),J=babelHelpers.interopRequireDefault(v),l=babelHelpers.interopRequireDefault(w),
m=babelHelpers.interopRequireDefault(x),K=babelHelpers.interopRequireDefault(y),Q=babelHelpers.interopRequireDefault(z),r=babelHelpers.interopRequireDefault(A),g=babelHelpers.interopRequireDefault(B),q=babelHelpers.interopRequireDefault(C),n=babelHelpers.interopRequireDefault(D),p=babelHelpers.interopRequireDefault(E),N=babelHelpers.interopRequireDefault(F),I=babelHelpers.interopRequireDefault(G);h.default={onReady:function(b,a,c){n.default.showFlashes();L(a);M(c);O((0,e.default)(b).find(".field-group #size"));
new Q.default((0,e.default)("#default-branch"),{field:(0,e.default)("#default-branch-field")});b=(0,e.default)("#name");a=(0,e.default)(".clone-url-generated span");r.default.bindUrlGeneration(a,{elementsToWatch:[b],getRepoName:b.val.bind(b)})}};t.exports=h["default"]});
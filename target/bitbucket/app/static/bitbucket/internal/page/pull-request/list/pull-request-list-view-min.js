define("bitbucket/internal/page/pull-request/list/pull-request-list-view","module exports jquery react bitbucket/internal/bbui/pull-request-list/pull-request-list bitbucket/internal/enums bitbucket/internal/feature/pull-request/list/pull-request-list-analytics bitbucket/internal/impl/data-provider/participants bitbucket/internal/impl/data-provider/pull-request-list bitbucket/internal/impl/data-provider/ref bitbucket/internal/util/events bitbucket/internal/util/shortcuts".split(" "),function(r,l,m,
d,t,u,v,w,x,y,z,A){Object.defineProperty(l,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(m),B=babelHelpers.interopRequireDefault(d),C=babelHelpers.interopRequireDefault(t),q=babelHelpers.interopRequireDefault(u),D=babelHelpers.interopRequireDefault(v);m=babelHelpers.interopRequireDefault(w);var E=babelHelpers.interopRequireDefault(x),F=babelHelpers.interopRequireDefault(y),G=babelHelpers.interopRequireDefault(z),n=babelHelpers.interopRequireDefault(A),H=function(d){function c(a){babelHelpers.classCallCheck(this,
c);var b=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments));b._preloadItems=a.preload||[];b._preloaded=b._initialPreloadedState=0===b._preloadItems.length;b._equalityCheck=a.equals||function(b,a){return b.id===a.id};return b}babelHelpers.inherits(c,d);babelHelpers.createClass(c,[{key:"reset",value:function(){this._preloaded=this._initialPreloadedState;return babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"reset",this).call(this)}},
{key:"_fetchNext",value:function(a){if(!this._preloaded)if(this.filter.term)this._preloaded=!0;else return a=p.default.Deferred(),a.resolve(this._preloadItems),a.abort=p.default.noop,a;return babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"_fetchNext",this).call(this,a===this._preloadItems?null:a)}},{key:"_transform",value:function(a){if(!this._preloaded)return this._preloaded=!0,this._preloadItems;var b=this._equalityCheck,e=this._preloadItems;a=babelHelpers.get(c.prototype.__proto__||
Object.getPrototypeOf(c.prototype),"_transform",this).call(this,a);return this.filter.term?a:a.filter(function(a){return!e.some(function(e){return b(e,a)})})}}]);return c}(m.default);d=function(d){function c(a){babelHelpers.classCallCheck(this,c);var b=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));b.moveFocus=function(a){return function(){return b.setState(function(b){return{focusedIndex:Math.max(Math.min(b.focusedIndex+a,b.pullRequests.length-1),
0)}})}};b.openPullRequest=function(){b._openHandler&&b._openHandler()};b.onFilterChange=function(a){var c=b.state,e=c.currentUser,f=c.filter,d=c.onMorePrsRequested,h=c.prProvider;c=b.props.onFilterChange;h.setFilter("state",a.state);h.setFilter("author_id",a.author_id);h.setFilter("target_ref_id",a.target_ref_id);h.setFilter("reviewer_id",a.reviewer_self&&e?e.name:null);h.reset();e=babelHelpers.extends({},f,{state:babelHelpers.extends({},f.state,{value:a.state}),author:babelHelpers.extends({},f.author,
{value:a.author_id}),target_ref:babelHelpers.extends({},f.target_ref,{value:a.target_ref_id}),reviewer_self:babelHelpers.extends({},f.reviewer_self,{value:a.reviewer_self})});b.setState({pullRequests:[],filter:e},d);c(a)};b.state=b.getInitialState(a);return b}babelHelpers.inherits(c,d);babelHelpers.createClass(c,[{key:"getInitialState",value:function(a){var b=this,c=a.currentUser,d=a.initialData,g=a.initialFilter,f=a.repository,l=a.selectedAuthor,h=a.selectedTargetBranch;a=new H({equals:function(a,
b){return a.name===b.name},filter:{role:q.default.ParticipantRole.AUTHOR},preload:c?[c]:null,repository:f});var m=new F.default({filter:{repository:f,term:"",type:"branch"}}),n=function(a,c){var d=function(){return{allFetched:a.reachedEnd,loading:a.isFetching}},e=function(){b.setState(function(a){var b=d();a=a.filter||{};b=babelHelpers.defineProperty({},c,babelHelpers.extends({},a[c],b));return{filter:babelHelpers.extends({},a,b)}})};return babelHelpers.extends({onMoreItemsRequested:function(b){a.isFetching||
(a.fetchNext().then(b).then(e),e())},onResetRequested:function(){a.reset();e()},onTermChanged:function(b){a.setFilter("term",b||"");e()}},d())};g={author:babelHelpers.extends({},n(a,"author"),{value:l&&l.name}),reviewer_self:{value:g.reviewer_self||!1},state:{value:g.state},target_ref:babelHelpers.extends({},n(m,"target_ref"),{value:h&&h.id})};var k=new E.default({filter:{author_id:g.author.value||null,reviewer_id:g.reviewer_self.value&&c?c.name:null,state:g.state.value||q.default.PullRequestState.OPEN,
target_ref_id:g.target_ref.value||null},repository:f.id},d);return{page:0,pullRequests:[],allFetched:k.reachedEnd,authorProvider:a,branchProvider:m,currentUser:c,filter:g,focusedIndex:0,loading:k.isFetching,onMorePrsRequested:function(){k.isFetching||(b.setState({loading:!0}),k.fetchNext().then(function(a){b.setState(function(b){return{allFetched:k.reachedEnd,loading:k.isFetching,page:b.page+1,pullRequests:b.pullRequests.concat(a)}},function(){G.default.trigger("bitbucket.internal.pull.request.list.updated");
D.default.onPaginate({page:b.state.page})})}))},prProvider:k,repository:f}}},{key:"componentDidMount",value:function(){n.default.bind("requestMoveToNextHandler",this.moveFocus(1));n.default.bind("requestMoveToPreviousHandler",this.moveFocus(-1));n.default.bind("requestOpenItemHandler",this.openPullRequest)}},{key:"render",value:function(){var a=this,b=this.state,c=this.props;return B.default.createElement(C.default,{allFetched:b.allFetched,currentUser:b.currentUser,focusedIndex:b.focusedIndex,gettingStarted:c.gettingStarted,
initialFilter:b.filter,loading:b.loading,onFilterChange:this.onFilterChange,onMorePrsRequested:b.onMorePrsRequested,pullRequests:b.pullRequests,repository:b.repository,selectedAuthor:c.selectedAuthor,selectedTargetBranch:c.selectedTargetBranch,openPullRequestCallback:function(b){return a._openHandler=b}})}}]);return c}(d.Component);l.default=d;r.exports=l["default"]});
define("bitbucket/internal/layout/branch/branch","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector bitbucket/internal/layout/branch/branch-layout-analytics bitbucket/internal/model/page-state bitbucket/internal/model/revision-reference bitbucket/internal/util/events bitbucket/internal/util/shortcuts".split(" "),function(h,d,m,n,p,q,r,t,u,v,w){Object.defineProperty(d,"__esModule",{value:!0});var b=babelHelpers.interopRequireDefault(m),
k=babelHelpers.interopRequireDefault(n),x=babelHelpers.interopRequireDefault(p),l=babelHelpers.interopRequireDefault(q),y=babelHelpers.interopRequireDefault(r),f=babelHelpers.interopRequireDefault(t),z=babelHelpers.interopRequireDefault(u),c=babelHelpers.interopRequireDefault(v),A=babelHelpers.interopRequireDefault(w);d.default={onReady:function(g,d){d=d||"at";var e=new l.default((0,b.default)(g),{id:"repository-layout-revision-selector-dialog",dataTransform:function(a){a=l.default.prototype._addRefTypeAndRepositoryToResults.call(this,
a);var c=x.default.parse(window.location.href);k.default.forEach(k.default.reject(a.values,"url"),function(a){var b=c.clone();b.replaceQueryParam(d,a.id);a.url=b.query()+(b.anchor()?b.anchor():"")});return a}});A.default.bind("branchSelector",k.default.ary(b.default.fn.click.bind(e.$trigger),0));f.default.setRevisionRef(e.getSelectedItem());c.default.on("bitbucket.internal.feature.repository.revisionReferenceSelector.revisionRefChanged",function(a){this===e&&(c.default.trigger("bitbucket.internal.layout.branch.revisionRefChanged",
this,a),f.default.setRevisionRef(e.getSelectedItem()))});c.default.on("bitbucket.internal.page.*.revisionRefChanged",function(a){e.setSelectedItem(z.default.hydrateDeprecated(a))});c.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",function(a){a.enableContext("branch")});var h=(0,b.default)("#branch-actions");g=(0,b.default)("#branch-actions-menu");g.on("aui-dropdown2-show",function(){c.default.trigger("bitbucket.internal.layout.branch.actions.dropdownShown");h.focus();
(0,b.default)(this).html(bitbucket.internal.layout.branch.actionsDropdownMenu({repository:f.default.getRepository().toJSON(),atRevisionRef:f.default.getRevisionRef().toJSON()}))}).on("aui-dropdown2-hide",function(){c.default.trigger("bitbucket.internal.layout.branch.actions.dropdownHidden")});y.default.initLayoutAnalytics(g)}};h.exports=d["default"]});
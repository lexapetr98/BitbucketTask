define("bitbucket/internal/layout/repository/repository","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/repository/sticky-branches bitbucket/internal/model/page-state bitbucket/internal/model/repository bitbucket/internal/util/events bitbucket/internal/widget/quick-copy-text bitbucket/internal/widget/sidebar/sidebar".split(" "),function(r,l,t,u,v,w,x,y,z,A,B){function C(c){c=new D.default(c);p.default.setRepository(c);p.default.setProject(c.getProject());(0,a.default)(".aui-page-header-image \x3e a").on("click",
function(){g.default.trigger("bitbucket.internal.sidebar.clickAvatar.expanded."+(0,a.default)(".aui-sidebar").attr("aria-expanded"),null)})}function m(){return(0,a.default)(".clone-url")}function q(){return(0,a.default)(".repository-protocol")}function E(){var c=m(),b=q(),h=(0,a.default)("#"+b.attr("aria-controls")),d=h.find("li"),k="";if(b.is("button")){n(b,b.text());var e=b.attr("data-clone-url");var f=b.attr("data-module-key")}else n(b,d.first().children("a").text()),e=d.first().attr("data-clone-url"),
f=d.first().attr("data-module-key");m().find(".clone-url-input").attr("value",e);c.addClass(f);k=f;(0,a.default)(document).on("click","#repository-protocol-selector li",function(d){var e=(0,a.default)(this);n(q(),e.text());m().find(".clone-url-input").attr("value",e.attr("data-clone-url")).select();f=e.attr("data-module-key");c.removeClass(k).addClass(f);k=f;g.default.trigger("bitbucket.internal.feature.repository.clone.protocol.changed",null,f,e.attr("data-clone-url"));d.stopPropagation();h.is(":visible")&&
b.trigger("aui-button-invoke");d.preventDefault()});g.default.trigger("bitbucket.internal.feature.repository.clone.protocol.initial",null,f,e)}function n(c,b){var a=c.children("span").remove();c.text(b).append(a)}function F(c){function b(){d&&d.open&&(d.open=!1)}var h,d;(0,a.default)(c).attr("aria-controls","repo-clone-dialog");(0,a.default)(document).on("click",c,function(b){b.preventDefault();k();d.open=!0;h.select()});var k=G.default.once(function(){d=document.getElementById("repo-clone-dialog");
h=(0,a.default)(d).find(".clone-url-input");g.default.on("bitbucket.internal.feature.sidebar.collapseEnd",b);g.default.on("bitbucket.internal.feature.sidebar.expandEnd",b)});(0,a.default)("#clone-dialog-options").html(bitbucket.internal.layout.cloneDialogOptions())}function H(){var c=(0,a.default)(".aui-page-header-actions .create-pull-request");g.default.on("bitbucket.internal.layout.branch.revisionRefChanged",function(b){var a=I.default.currentRepo().createPullRequest();!b.isDefault()&&b.isBranch()&&
(a=a.sourceBranch(b.getId()));c.attr("href",a.build())})}function J(){(0,a.default)(".aui-sidebar[aria-expanded\x3dfalse] .aui-page-header-image").tooltip({gravity:"w",delayIn:0,live:!0,html:!0,aria:!0,className:"aui-sidebar-section-tooltip",title:function(){return(0,a.default)(this).find(".aui-avatar").attr("data-tooltip")}})}Object.defineProperty(l,"__esModule",{value:!0});var a=babelHelpers.interopRequireDefault(t),G=babelHelpers.interopRequireDefault(u),I=babelHelpers.interopRequireDefault(v),
K=babelHelpers.interopRequireDefault(w),p=babelHelpers.interopRequireDefault(x),D=babelHelpers.interopRequireDefault(y),g=babelHelpers.interopRequireDefault(z),L=babelHelpers.interopRequireDefault(A),M=babelHelpers.interopRequireDefault(B);l.default={onReady:function(c,b){C(c);E();L.default.onReady();(0,a.default)(document).ready(M.default.onReady);K.default.onReady();F(b);H();(0,a.default)(".repository-badge .badge").tooltip({gravity:"n"});J();g.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",
function(a){a.enableContext("repository")})}};r.exports=l["default"]});
define("bitbucket/internal/util/notifications/notifications","module exports @atlassian/aui jquery lodash bitbucket/internal/util/client-storage".split(" "),function(n,f,g,p,q,r){function h(){var a=c.default.getFlashItem("page-load-notifications");c.default.removeFlashItem("page-load-notifications");return a}function k(a){a.forEach(function(a){c.default.removeItem("page-load-notifications-polling-"+a)})}function t(a,d){a.body+=bitbucket.internal.util.notifications.closePollingFlag();var b=(0,g.flag)(a);
(0,l.default)(b).find(".close").on("click",function(){b.close();a.closed=!0;c.default.setItem(d,a)})}Object.defineProperty(f,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(p),m=babelHelpers.interopRequireDefault(q),c=babelHelpers.interopRequireDefault(r),e=Array.isArray(c.default.getItem("page-load-notifications-polling-names"))&&c.default.getItem("page-load-notifications-polling-names")||[];setTimeout(function(){k(e)},5E3);f.default={addFlash:function(a,d){var b=h()||[];d=d||{};
b.push({title:a,body:d.body,type:d.type||"success",close:d.close||"auto"});b&&b.length?c.default.setFlashItem("page-load-notifications",b):c.default.removeFlashItem("page-load-notifications")},showOnReady:function(a){(a.title||a.body)&&(0,l.default)(document).ready(function(){(0,g.flag)(a)})},showFlashes:function(){m.default.forEach(h(),function(a){(0,g.flag)(a)})},_clearPollingNotifications:k,polling:function(a,d){var b=e.indexOf(a);0>b?(e.push(a),c.default.setItem("page-load-notifications-polling-names",
e)):e.splice(b,1);a="page-load-notifications-polling-"+a;b=c.default.getItem(a);b||(b=m.default.assign(d,{closed:!1}),c.default.setItem(a,b));b.closed||t(b,a)},_drainNotifications:function(){return h()}};n.exports=f["default"]});
define("bitbucket/internal/util/time","module exports @atlassian/aui lodash moment bitbucket/internal/util/text".split(" "),function(t,k,u,v,w,x){function f(a,b){this.key=a;this.isAge=b}function e(a,b,c,d){return d?y(a,c,d):b===f.types.shortAge?z(a,c):A(a,c)}function z(a,b){switch(a){case "absolute":return b;case "aMomentAgo":return d.default.I18n.getText("bitbucket.date.format.short.a.moment.ago");case "oneMinuteAgo":return d.default.I18n.getText("bitbucket.date.format.short.one.minute.ago");case "xMinutesAgo":return d.default.I18n.getText("bitbucket.date.format.short.x.minutes.ago",
b);case "oneHourAgo":return d.default.I18n.getText("bitbucket.date.format.short.one.hour.ago");case "xHoursAgo":return d.default.I18n.getText("bitbucket.date.format.short.x.hours.ago",b);case "oneDayAgo":return d.default.I18n.getText("bitbucket.date.format.short.one.day.ago");case "xDaysAgo":return d.default.I18n.getText("bitbucket.date.format.short.x.days.ago",b);case "oneWeekAgo":return d.default.I18n.getText("bitbucket.date.format.short.one.week.ago");default:return null}}function A(a,b){switch(a){case "absolute":return b;
case "aMomentAgo":return d.default.I18n.getText("bitbucket.date.format.long.a.moment.ago");case "oneMinuteAgo":return d.default.I18n.getText("bitbucket.date.format.long.one.minute.ago");case "xMinutesAgo":return d.default.I18n.getText("bitbucket.date.format.long.x.minutes.ago",b);case "oneHourAgo":return d.default.I18n.getText("bitbucket.date.format.long.one.hour.ago");case "xHoursAgo":return d.default.I18n.getText("bitbucket.date.format.long.x.hours.ago",b);case "oneDayAgo":return d.default.I18n.getText("bitbucket.date.format.long.one.day.ago");
case "xDaysAgo":return d.default.I18n.getText("bitbucket.date.format.long.x.days.ago",b);case "oneWeekAgo":return d.default.I18n.getText("bitbucket.date.format.long.one.week.ago");default:return null}}function y(a,b,c){switch(a){case "absolute":return c.absolute?c.absolute(b):b;case "aMomentAgo":return c.aMomentAgo(b);case "oneMinuteAgo":return c.oneMinuteAgo(b);case "xMinutesAgo":return c.xMinutesAgo(b);case "oneHourAgo":return c.oneHourAgo(b);case "xHoursAgo":return c.xHoursAgo(b);case "oneDayAgo":return c.oneDayAgo(b);
case "xDaysAgo":return c.xDaysAgo(b);case "oneWeekAgo":return c.oneWeekAgo(b);default:return null}}function B(a){if(C.call(l,a))return l[a];var b="",c;for(n.exec("");c=n.exec(a);)switch(c=c[0],c.charAt(0)){case "'":b+="["+c.substring(1,c.length-1)+"]";break;case "d":case "y":case "a":b+=c.toUpperCase();break;default:b+=c}return l[a]=b}function D(a){switch(a.key){case "short":case "shortAge":return date_format("bitbucket.date.format.short");case "long":case "longAge":return date_format("bitbucket.date.format.long");
case "full":return date_format("bitbucket.date.format.full");case "timestamp":return date_format("bitbucket.date.format.timestamp");default:return null}}function g(){var a=document.getElementById("content");return a?parseInt(a.getAttribute("data-timezone"),10):0}function E(a,b){var c=a.clone();b="number"===typeof b?b:g();-a.utcOffset()!==b&&c.add(-a.utcOffset()-b,"m");return c}function m(a,b,c){var d="number"===typeof c?c:g();a=E(a,d);b=B(D(b)).replace(/Z+/g,function(b){b=1===b.length?"":":";var a=
"number"===typeof d?d:g(),c=Math.abs(a),e=c%60;a=""+(0>=a?"+":"-")+p.default.padLeft(Math.floor(c/60).toString(),2,"0");a=a+(b||"")+p.default.padLeft(e.toString(),2,"0");return"["+a+"]"});return a.format(b)}function q(a,b,c,d){c=c||(0,r.default)();if(a<=c){if(a>c.clone().subtract(1,"m"))return e("aMomentAgo",b,null,d);if(a>c.clone().subtract(2,"m"))return e("oneMinuteAgo",b,null,d);if(a>c.clone().subtract(50,"m"))return e("xMinutesAgo",b,Math.floor(c.diff(a,"minutes",!0)),d);if(a>c.clone().subtract(90,
"m"))return e("oneHourAgo",b,null,d);for(var f=c,h=f.clone().add(1,"d").hours(0).minutes(0).seconds(0).milliseconds(0).subtract(-a.utcOffset()-g(),"m");h>f;)h.subtract(1,"d");if(h.clone().subtract(1,"d")<=a&&a<h&&a<c.clone().subtract(5,"h"))return e("oneDayAgo",b,null,d);if(a>c.clone().subtract(1,"d"))return a=c.diff(a,"hours",!0),e("xHoursAgo",b,Math.round(a),d);if(a>c.clone().subtract(7,"d"))return e("xDaysAgo",b,Math.max(Math.floor(c.diff(a,"days",!0)),2),d);if(a>c.clone().subtract(8,"d"))return e("oneWeekAgo",
b,null,d)}return e("absolute",b,m(a,b),d)}Object.defineProperty(k,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(u),r=babelHelpers.interopRequireDefault(w),p=babelHelpers.interopRequireDefault(x),C=Object.prototype.hasOwnProperty,l={},n=/d{1,2}|'[^']+'|M{1,4}|y{2,4}|h{1,2}|H{1,2}|m{2}|s{2}|S{1,4}|Z{1,2}|z{1,2}|a|:|-|\/|\s+/g;f.types="shortAge longAge short long full timestamp".split(" ").reduce(function(a,b){a[b]=new f(b,(0,v.includes)(b.toLowerCase(),"age"));return a},{});k.default=
{format:function(a,b,c){a=a?(0,r.default)(a):null;b=f.types[b];c=a&&b?b.isAge?q(a,b,null,c):m(a,b):null;return c},FormatType:f,getTimezoneOffset:g,formatDateWithFormatString:m,formatDateWithRelativeAge:q};t.exports=k["default"]});
define("bitbucket/internal/util/determine-language",["module","exports","codemirror","jquery","lodash"],function(t,k,l,u,v){Object.defineProperty(k,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(l),r=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(v);document.documentElement.className+=" cm-s-stash-default";l=WRM.data.claim("com.atlassian.bitbucket.server.bitbucket-web:determine-language.syntax-highlighters")||{};var m={},n={};g.default.forEach(l,function(c,
a){g.default.forEach(c.e,function(b){m[b]=a});g.default.forEach(c.x,function(b){n[b]=a})});var p={},q={};k.default={fromFileInfo:function(c){var a=c.path,b=a.lastIndexOf(".");b=-1===b?a:a.substring(b+1);var d;if(1<c.firstLine.length)if(d=/^#!(?:\/(?:usr\/)?(?:local\/)?bin\/([^\s]+))(?:\s+([^\s]+))?/.exec(c.firstLine)){var e=d[1];"env"===e&&(e=d[2]);d=e}else d=null;else d=null;e=p.hasOwnProperty(b)?p[b]:d&&q.hasOwnProperty(d)?q[d]:null;var h;e||((h=g.default.has(m,b)?m[b]:null)||(h=null!=d?g.default.has(n,
d)?n[d]:null:null),e=(e=h?f.default.findModeByMIME(h):f.default.findModeByFileName(a))||f.default.findModeByMIME("text/plain"),e.builtIn=!0);return c.legacy?h||"text":e},registerCodeMirrorMode:function(c,a,b){a&&a.forEach(function(a){p[a]=c});b&&b.forEach(function(a){q[a]=c})},getCodeMirrorModeForName:function(c){var a=f.default.findModeByName(c)||f.default.findModeByExtension(c);return a?"undefined"===typeof f.default.mimeModes[a.mime]?WRM.require("wr!com.atlassian.bitbucket.server.bitbucket-highlight:"+
a.mode).then(function(){return a}):r.default.Deferred().resolve(a):r.default.Deferred().resolve(f.default.findModeByMIME("text/plain"))}};t.exports=k["default"]});
define("bitbucket/internal/util/dirty-tracker",["module","exports","@atlassian/aui","jquery","lodash"],function(k,d,l,m,n){function e(a,b){var d=[g.default.keyCode.BACKSPACE,g.default.keyCode.DELETE];b&&b.synthetic||!(0,c.default)(a.target).is("input[type\x3dtext], textarea")&&"change"!==a.type||"keydown"===a.type&&!f.default.includes(d,a.keyCode)||(0,c.default)(this).attr("data-dirty",!0).off("change input keypress keydown cut paste",e)}Object.defineProperty(d,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(l),
c=babelHelpers.interopRequireDefault(m),f=babelHelpers.interopRequireDefault(n),h=document.body;d.default={track:function(a){a=a||{};if(a.elements)(0,c.default)(a.elements).on("change input keypress keydown cut paste",e);if(a.selector||a.container||!a.elements){var b=(0,c.default)(a.container||h);a=a.selector||"input, textarea";a=f.default.invokeMap(a.split(","),"replace",/\s*$/,":not([data-dirty])").join(",");b.on("change input keypress keydown cut paste",a,e)}},untrack:function(a){a=a||{};a.elements&&
(0,c.default)(a.elements).off("change input keypress keydown cut paste",e);if(a.selector||a.container||!a.elements){var b=(0,c.default)(a.container||h);a=a.selector||"input, textarea";a=f.default.map(a.split(","),function(a){return a.replace(/\s+$/,"")+":not([data-dirty])"}).join(",");b.off("change input keypress keydown cut paste",a,e)}}};k.exports=d["default"]});
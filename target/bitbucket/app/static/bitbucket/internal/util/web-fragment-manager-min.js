window.WebFragments=function(){function u(a){var b=Array.prototype.slice.call(arguments,1),c,g=b.length;for(c=0;c<g;c++){var d=b[c];if(d){var f=k(d),e,l=f.length;for(e=0;e<l;e++){var h=f[e];a[h]=d[h]}}}return a}function m(a,b){return"function"===typeof a?a(u({},b)):a}function v(a,b,c){var g,d={type:c.toUpperCase()};if(n.call(a,"serverCondition")&&!a.serverCondition)return null;b=u({},b,a.serverContext,a.params);if(n.call(a,"condition")&&!m(a.condition,b))return null;a["context-provider"]&&"function"===
typeof a["context-provider"]&&(b=m(a["context-provider"],b));c=k(a);var f=0;for(g=c.length;f<g;f++){var e=c[f];/con(dition|text-provider)|params/.test(e)||(d[e]=m(a[e],b))}if(a.params){var l=d.params={};c=k(a.params);f=0;for(g=c.length;f<g;f++)e=c[f],l[e]=m(a.params[e],b)}return d}function p(a){var b=q[a];return function(c,g){var d=b[c],f=[];if(d&&d.length){var e,l=d.length;for(e=0;e<l;e++){var h=v(d[e],g,a);h&&f.push(h)}}-1===c.indexOf("bitbucket.internal.")&&(new RegExp("[\\?\x26]web\\."+a+"s(\x3d|\x26|$)")).test(window.location.search)&&
f.push(y[a](c,g));return f}}function r(a){var b=q[a];return function(a){if(!a)throw Error("No descriptor provided");if("string"!==typeof a.location)throw Error("No location provided, or location was not a string.");if("string"!==typeof a.completeModuleKey)throw Error("No completeModuleKey provided, or completeModuleKey was not a string.");w(a);b[a.location]||(b[a.location]=[]);b[a.location].push(a);b[a.location].sort(t)}}function t(a,b){return(0<=a.weight?a.weight:1E3)-(0<=b.weight?b.weight:1E3)}
var n=Object.prototype.hasOwnProperty,q={item:{},section:{},panel:{}},k=function(a){var b=[],c;for(c in a)n.call(a,c)&&b.push(c);return b},w=void 0;w=window._PageDataPlugin&&_PageDataPlugin.ready?function(a){_PageDataPlugin.ready(a.completeModuleKey,a.location,function(b){n.call(b,"serverCondition")&&(a.serverCondition=b.serverCondition);n.call(b,"serverContext")&&(a.serverContext=b.serverContext)})}:function(a){return a};var y={item:function(a,b){return{url:"#example-web-item-url",pluginKey:"org.example.plugins",
moduleKey:"example-web-item",completeModuleKey:"org.example.plugins:example-web-item",linkText:"Client Web Item: "+a,hasTooltip:!0,tooltip:"Client Context Items: "+k(b).join(", "),hasIcon:!1,iconUrl:null,iconWidth:0,iconHeight:0,styleClass:"plugin-point",linkId:null,description:null,params:{},type:"ITEM",weight:1E3}},section:function(a,b){return{name:"example-web-section",key:"example-web-section",location:a,labelText:"Client Web Section: "+a,type:"SECTION",params:{},weight:1E3}},panel:function(a,
b){return{view:'\x3cdiv class\x3d"plugin-point web-panel"\x3e\x3cstrong\x3eClient Web Panel\x3c/strong\x3e: '+a+"\x3cbr /\x3e\x3cstrong\x3eClient Context Items\x3c/strong\x3e: "+k(b).join(", ")+"\x3c/div\x3e",weight:1E3}}},x=p("panel");p("item");return{getWebItems:p("item"),getWebSections:p("section"),getWebPanels:function(a,b){a=x(a,b);var c=a.length;for(b=0;b<c;b++)a[b]=a[b].view;return a},getWebFragmentDescriptors:function(a,b){return(a=(b=q[b])&&b[a])&&a.slice()||[]},addWebItemDescriptor:r("item"),
addWebSectionDescriptor:r("section"),addWebPanelDescriptor:r("panel"),getWebFragments:function(a,b,c){"string"!==typeof b&&(c=b,b=a);a=this.getWebItems(a,c);b=this.getWebSections(b,c);b=a.concat(b);b.sort(t);return b},_getValue:m,_formatI18n:function(a,b,c){var g=(a===b?c:a)||b||c||"";return function(a){var b=[],c=k(a);c.sort();var d,h=c.length;for(d=0;d<h;d++)b.push(a[c[d]]);return AJS.format(g,b)}},_getWebPanels:x,_getDeprecatedWebFragments:function(a,b,c){b=b.map(function(a){return a.toLowerCase()}).map(function(b){return[b,
WebFragments.getWebFragmentDescriptors(a,b)]});b.some(function(a){return babelHelpers.slicedToArray(a,2)[1].some(function(a){return"com.atlassian.bitbucket.server.bitbucket-client-web-fragments"!==a.pluginKey})})&&console.warn("The client-side web-fragment location '"+a+"' is deprecated and will be removed in a future release.");return b.reduce(function(a,b){b=babelHelpers.slicedToArray(b,2);var d=b[0];b=b[1].map(function(a){return v(a,c,d)}).filter(function(a){return a});"panel"===d&&b.forEach(function(a){return a.html=
a.view||""});return a.concat(b)},[]).sort(t)}}}();define("bitbucket/internal/util/web-fragment-manager",function(){return window.WebFragments});
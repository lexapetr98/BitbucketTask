define("bitbucket/internal/util/reducers",["exports","icepick","lodash","bitbucket/internal/util/get-id","./object"],function(a,f,h,n,q){Object.defineProperty(a,"__esModule",{value:!0});a.errorsReducer=a.pagingReducer=a.entitiesReducer=a.toggleReducer=a.singleKeyedReducer=a.multiKeyedReducer=a.reduceByTypes=a.reduceByType=a.preserveIfEquivalent=a.preserveEquivalentArraysUnion=a.preserveEqualArrays=void 0;var p=function(b){return b!==Object(b)?b:(0,f.freeze)(b)},m=a.preserveEqualArrays=function(b,
c){return Array.isArray(b)&&Array.isArray(c)?(0,h.isEqual)(b,c)?b:c:c},r=a.preserveEquivalentArraysUnion=function(b,c){return Array.isArray(b)&&Array.isArray(c)?(c=(0,h.unionWith)(b,c,h.isEqual),(0,h.isEqual)(b,c)?b:c):c};a.preserveIfEquivalent=function(b,c){return(0,q.shallowEqual)(b,c)?b:c};var t=a.reduceByType=function(b,c){return function(){var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:p(b),d=arguments[1],a=arguments[2];return c[d.type]?p(c[d.type](k,d,a)):k}},l=a.reduceByTypes=
function(b,c){return t(b,Array.from(c).reduce(function(b,c){c=babelHelpers.slicedToArray(c,2);var a=c[0],e=c[1];(0,h.castArray)(a).forEach(function(c){return b[c]=e});return b},{}))};a.multiKeyedReducer=function(b){return function(c){return function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:(0,f.freeze)({}),d=arguments[1],g=arguments[2],e=b(d);return null==e?a:(0,f.set)(a,e,c(a[e],d,g))}}};a.singleKeyedReducer=function(b){return function(c){return function(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},d=arguments[1],g=arguments[2],e=b(d);return null==e?a:e in a?(0,f.set)(a,e,c(a[e],d,g)):babelHelpers.defineProperty({},e,c(void 0,d,g))}}};a.toggleReducer=function(b){var c=b.on,a=b.off,d=b.toggle,g=b.reset;b=b.initialValue;var e=void 0===b?!1:b;c=new Map([[void 0===c?[]:c,function(){return!0}],[void 0===a?[]:a,function(){return!1}],[void 0===d?[]:d,function(b){return!b}],[void 0===g?[]:g,function(){return e}]]);return l(e,c)};a.entitiesReducer=function(b,c){var a=
b.loadPageSuccess;a=void 0===a?[]:a;b=b.loadSingleSuccess;b=void 0===b?[]:b;var d=(0,n.getIdString)(c);c=new Map([[a,function(b,a){a=a.payload;return(0,f.merge)(b,a.values.reduce(function(b,a){b[d(a)]=a;return b},{}),m)}],[b,function(b,a){a=a.payload;return(0,f.merge)(b,babelHelpers.defineProperty({},d(a),a),m)}]]);return l({},c)};a.pagingReducer=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,d=
(0,n.getIdString)(a);b=new Map([[b,function(b,a){a=a.payload;return(0,f.merge)(b,{lastPageMeta:(0,h.omit)(a,"values"),ids:a.values.map(d)},k?r:m)}]]);return l({},b)};a.errorsReducer=function(a){var b=new Map([[1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],function(){return a}],[2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],function(a,b){return(a=b.payload.response)&&a.errors||[{message:"An unknown error occurred."}]}]]);return l(a,b)}});
define("bitbucket/internal/widget/canvas-cropper/canvas-cropper",["module","exports","jquery"],function(q,n,r){function b(a,c){return this.init.apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(r);b.prototype.defaults={outputFormat:"image/png",backgroundFillColor:void 0};b.prototype.init=function(a,c,d){this.width=a;this.height=c||a;this.options=p.default.extend({},this.defaults,d);this.canvas=(0,p.default)("\x3ccanvas/\x3e").attr("width",
this.width).attr("height",this.height).get(0);return this};b.prototype.cropToDataURI=function(a,c,d,e,f){return this.crop(a,c,d,e,f).getDataURI(this.options.outputFormat)};b.prototype.crop=function(a,c,d,e,f){var b=this.canvas.getContext("2d"),l=0,m=0,g=this.width,h=this.height;b.clearRect(l,m,g,h);this.options.backgroundFillColor&&(b.fillStyle=this.options.backgroundFillColor,b.fillRect(l,m,g,h));0>c&&(l=Math.round(Math.abs(c)/e*g),c=0);0>d&&(m=Math.round(Math.abs(d)/f*h),d=0);if(c+e>a.naturalWidth){var k=
a.naturalWidth-c;g*=k/e;e=k}d+f>a.naturalHeight&&(k=a.naturalHeight-d,h*=k/f,f=k);b.drawImage(a,c,d,e,f,l,m,g,h);return this};b.prototype.getDataURI=function(a){return a?this.canvas.toDataURL(a):null};n.default=b;q.exports=n["default"]});
define("bitbucket/internal/widget/autocomplete-dialog/autocomplete-dialog",["module","exports","backbone","jquery","lodash"],function(g,e,h,k,l){Object.defineProperty(e,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(h),d=babelHelpers.interopRequireDefault(k),m=babelHelpers.interopRequireDefault(l);e.default=f.default.View.extend({className:"aui-dropdown2 aui-style-default aui-dropdown2-tailed",initialize:function(){var a=parseInt(this.options.minZIndex,10);a&&this.$el.css("z-index",
a+1);(0,d.default)(document.body).append(this.el);this.options.anchor&&this.updateAnchorPosition(this.options.anchor);this.template=this.options.template||d.default.noop;this.highlighter=this.options.highlighter;this.collection=this.collection||new f.default.Collection;this.collection.bind("reset",this.render,this);this.render()},events:{"click li.result":"onClickItem"},render:function(){var a=this.collection.toJSON(),c=this.collection.query,b=this.collection.indexOf(this.selectedResult);b=(0,d.default)(this.template({query:c,
results:a,activeItemIndex:0<=b?b:0}));c&&a.length&&m.default.isFunction(this.highlighter)&&(b=this.highlighter(b,c));this.$el.html(b);this.$spinner&&this.$spinner.appendTo(this.$("ul"));return this},toggleSpinner:function(a){a?this.$spinner||(this.$spinner=(0,d.default)("\x3cli/\x3e").addClass("spinContainer").appendTo(this.$("ul")).spin("small")):(this.$spinner&&this.$spinner.spinStop().remove(),this.$spinner=null)},moveSelectionUp:function(){this.moveSelection(this.DIRECTION_UP)},moveSelectionDown:function(){this.moveSelection(this.DIRECTION_DOWN)},
moveSelection:function(a){var c=this.$("li");if(!(1>=c.length)){var b=c.filter(".active");b=d.default.inArray(b.get(0),c);if(a===this.DIRECTION_DOWN?b<c.length-1:0<b)b+=a,c.removeClass("active").eq(b).addClass("active"),this.selectedResult=this.collection.at(b)}},getSelectedItemIndex:function(){return this.$("li.active").index()},onClickItem:function(a){this.trigger("itemSelected",this.$(a.currentTarget).index())},anchorOptions:{dropdownTailBufferLeft:25,dropdownTailBufferRight:35,viewportWidth:(0,
d.default)(window).width(),bufferTop:2},updateAnchorPosition:function(a){this.anchorOptions.viewportWidth-a.left>this.$el.outerWidth()?this.$el.css({top:a.top+this.anchorOptions.bufferTop,left:a.left-this.anchorOptions.dropdownTailBufferLeft}).attr("data-dropdown2-alignment","left"):this.$el.css({top:a.top+this.anchorOptions.bufferTop,left:a.left-this.$el.outerWidth()+this.anchorOptions.dropdownTailBufferRight}).attr("data-dropdown2-alignment","right")},DIRECTION_UP:-1,DIRECTION_DOWN:1});g.exports=
e["default"]});
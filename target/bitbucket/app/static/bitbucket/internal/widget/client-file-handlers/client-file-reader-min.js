define("bitbucket/internal/widget/client-file-handlers/client-file-reader","module exports jquery lodash bitbucket/internal/util/feature-detect bitbucket/internal/widget/client-file-handlers/client-file-handler".split(" "),function(h,e,b,f,k,l){function a(m){if(!a.isSupported())throw Error("ClientFileReader requires FileReaderAPI support");return this.init(m)}Object.defineProperty(e,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);var d=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(k);
var c=babelHelpers.interopRequireDefault(l),g={ArrayBuffer:"readAsArrayBuffer",BinaryString:"readAsBinaryString",DataURL:"readAsDataURL",Text:"readAsText"};a.isSupported=f.default.fileReader;b.default.extend(a.prototype,c.default.prototype);a.readMethods={ArrayBuffer:"ArrayBuffer",BinaryString:"BinaryString",DataURL:"DataURL",Text:"Text"};a.typeFilters=c.default.typeFilters;a.prototype.defaults=b.default.extend({},c.default.prototype.defaults,{readMethod:a.readMethods.DataURL,onRead:b.default.noop});
a.prototype.init=function(a){d.default.bindAll(this,"onSuccess","readFile");c.default.prototype.init.call(this,a);this.options.onSuccess=this.onSuccess;return this};a.prototype.onSuccess=function(a){var b=d.default.has(g,this.options.readMethod)?g[this.options.readMethod]:void 0;b&&d.default.forEach(a,d.default.bind(function(a){var c=new FileReader;c.onload=d.default.bind(this.readFile,this,a);c[b](a)},this))};a.prototype.readFile=function(a,b){d.default.isFunction(this.options.onRead)&&this.options.onRead(b.target.result,
a)};e.default=a;h.exports=e["default"]});
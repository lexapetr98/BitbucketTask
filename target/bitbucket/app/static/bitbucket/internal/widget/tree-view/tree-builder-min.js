define("bitbucket/internal/widget/tree-view/tree-builder",["exports"],function(d){function f(a){var c=a.children,e=function(a){return a.children.every(function(a){return a.type===g})};c.forEach(function(a,q){for(var b=a,d=[a.name];1===b.children.length&&e(b);)b=b.children[0],d.push(b.name);b!==a?(a=d.join(l),c.splice(q,1,babelHelpers.extends({},b,{id:b.id,name:a})),f(b)):b.type===g&&f(b)})}function m(a){var c=Object.values(a.children);c.forEach(m);a.children=c}function k(a){a=a.children;a.sort(function(a,
e){var b=a.name;a=a.type;var c=e.name;return a===e.type?b.charAt(0).match(h)&&!c.charAt(0).match(h)?-1:!b.charAt(0).match(h)&&c.charAt(0).match(h)?1:b.localeCompare(c,void 0,{numeric:!0}):a===g?-1:1});a.forEach(k)}function n(a){a=a.reduce(function(a,e){var b=e.name,c=e.path;e=babelHelpers.objectWithoutProperties(e,["name","path"]);c=c.slice(0,-1);r(a,c).children[b]=babelHelpers.extends({},e,{name:b,isCollapsed:!1,children:{}});return a},{id:null,isRoot:!0,children:{}});m(a);return a}function p(a){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=a.id;a.children.forEach(function(a){c[a.id]=e;p(a,c)});return c}Object.defineProperty(d,"__esModule",{value:!0});d.flattenTree=f;d.sortTreeNodes=k;d.buildTreeFromNodes=n;d.buildNodesRelation=p;d.buildTree=function(a){a=n(a);f(a);k(a);return a};var l="/",g="DIRECTORY",h=/\W/,r=function(a,c){return c.reduce(function(a,b,d){a.children[b]||(d=c.slice(0,d+1).join(l),a.children[b]={id:d,name:b,type:g,isCollapsed:!1,children:{}});return a.children[b]},
a)}});
define("bitbucket/internal/widget/error-dialog/error-dialog",["module","exports","@atlassian/aui","jquery"],function(e,d,c,a){Object.defineProperty(d,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(a);a=function(){function a(b){babelHelpers.classCallCheck(this,a);this._okCallbacks=f.default.Callbacks();this._closeCallbacks=f.default.Callbacks();this.reinit(b)}babelHelpers.createClass(a,[{key:"reinit",value:function(b){this.dialogOptions=babelHelpers.extends({},a.dialogDefaults,b);
this.remove();return this}},{key:"_createDialog",value:function(){var b=this;if(!this._dialog){var a=this.dialogOptions,d=a.okButtonClass,e=a.closeButtonClass;a=a.showCloseButton;this._dialog=new c.dialog2(bitbucket.internal.dialogs.error(babelHelpers.extends({},this.dialogOptions,{extraClasses:"error-dialog"})));var g=this._dialog.$el;g.on("keydown",function(a){a.keyCode===c.keyCode.ESCAPE&&b.hide()});g.find("."+d).click(function(){var a=f.default.Event("ok");b._okCallbacks.fireWith(b,[a]);a.isDefaultPrevented()||
b.remove()});a&&g.find("."+e).click(function(){b.remove()})}}},{key:"show",value:function(){this._createDialog();this._dialog.show();return this}},{key:"isShowing",value:function(){return this._dialog&&this._dialog.$el.is(":visible")}},{key:"hide",value:function(){this.isShowing()&&(this._dialog.off("keydown"),this._dialog.hide(),this._closeCallbacks.fireWith(this,[]));return this}},{key:"remove",value:function(){this._dialog&&(this.hide(),this._dialog.remove(),this._dialog=null);return this}},{key:"addOkListener",
value:function(a){this._okCallbacks.add(a);return this}},{key:"addHideListener",value:function(a){this._closeCallbacks.add(a);return this}},{key:"getOkButton",value:function(){this._createDialog();return this._dialog.$el.find("."+this.dialogOptions.okButtonClass)}}]);return a}();a.dialogDefaults={id:null,titleText:c.I18n.getText("bitbucket.web.dialog.unexpected.error.title"),titleClass:"error-header",panelContent:"\x3cp\x3e"+c.I18n.getText("bitbucket.web.dialog.unknown.error.detail")+"\x3c/p\x3e",
panelClass:"panel-body",okButtonText:c.I18n.getText("bitbucket.web.dialog.button.ok"),okButtonClass:"ok-button",showCloseButton:!1,closeButtonText:c.I18n.getText("bitbucket.web.dialog.button.close"),closeButtonClass:"close-button",closeOnOutsideClick:!1};d.default=a;e.exports=d["default"]});
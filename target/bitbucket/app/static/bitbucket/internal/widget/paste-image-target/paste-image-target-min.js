define("bitbucket/internal/widget/paste-image-target/paste-image-target","module exports jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/widget/client-file-handlers/client-file-handler".split(" "),function(e,d,f,g,h,k,l){function b(a,b){this.init.apply(this,arguments)}Object.defineProperty(d,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(f),c=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(k),
q=babelHelpers.interopRequireDefault(l);b.prototype.init=function(a,b){c.default.bindAll(this,"handlePaste","processClipboardItem");this.$el=(0,m.default)(a);this.clientFileHandler=b;this._destroyables=[];this._destroyables.push(n.default.chainWith(this.$el).on("paste",this.handlePaste))};b.prototype.handlePaste=function(a){var b=q.default.typeFilters.image;a=a.originalEvent;a=a.clipboardData&&a.clipboardData.items;this.clientFileHandler&&a&&1===a.length&&c.default.toArray(a).filter(c.default.flow(p.default.dot("type"),
b.test.bind(b))).forEach(this.processClipboardItem)};b.prototype.processClipboardItem=function(a){a=a.getAsFile();a.name||(a.name="upload."+c.default.last(a.type.split("/")));this.clientFileHandler.handleFiles([a],this.$el)};b.prototype.destroy=function(){c.default.invokeMap(this._destroyables,"destroy")};d.default=b;e.exports=d["default"]});
define("bitbucket/internal/widget/list-and-detail-view/list-and-detail-view",["module","exports","jquery","lodash","bitbucket/internal/util/feature-detect"],function(f,e,g,h,k){function b(a,c,l){this.options=d.default.extend({},b.prototype.defaults,l);this.$listView=a.find(".list-view");this.$detailView=a.find(".detail-view");this.selectHandler=c;m.default.bindAll(this,"_itemClickHandler","_shortcutHandler");this.init()}Object.defineProperty(e,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),
m=babelHelpers.interopRequireDefault(h),n=babelHelpers.interopRequireDefault(k);b.prototype.defaults={selectedClass:"selectedItem"};b.prototype.init=function(){this.bindShortcuts();this.$listView.on("click","li",this._itemClickHandler);this._maybeSelectFirst()};b.prototype._itemClickHandler=function(a){var c=this.options.selectedClass;this.$listView.find("li."+c).removeClass(c);c=(0,d.default)(a.currentTarget).addClass(c);this.selectHandler(c,this.$listView,this.$detailView,a)};b.prototype._maybeSelectFirst=
function(){this.options.selectFirstOnInit&&this.$listView.find("li:first").click()};b.prototype.destroy=function(){this.unbindShortcuts()};b.prototype._shortcutHandler=function(a){if(74===a.which)a="next";else if(75===a.which)a="prev";else return;this.$listView.find("li."+this.options.selectedClass)[a]("li").click().find("a").focus().blur()};b.prototype.bindShortcuts=function(){(0,d.default)(document).on("keydown",this._shortcutHandler)};b.prototype.unbindShortcuts=function(){(0,d.default)(document).off("keydown",
this._shortcutHandler)};b.prototype.removeItem=function(a,c){var b=d.default.Deferred();a.addClass("offScreen").one(n.default.transitionEndEventName(),function(c){a.remove();b.resolve()});a.next(c).length?a.next(c).click():a.prev(c).length?a.prev(c).click():this.$detailView.empty();return b.promise()};b.prototype.addItem=function(a,c,b){a.addClass("offScreen");c?a.insertBefore(c):a.appendTo(this.$listView);a.offset();a.removeClass("offScreen");b&&a.click()};e.default=b;f.exports=e["default"]});
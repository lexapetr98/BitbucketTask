@import "/static/global.less";

.aui-sidebar {
    .aui-page-header-main.entity-item {
        .aui-nav-breadcrumbs li {
            .text-overflow();
            max-width: 100%;
        }

        h1 {
            display: inline-block;
            max-width: 100%;

            + .aui-button {
                margin-left: @baseSpacing;
                vertical-align: bottom;
            }
        }
    }

    .aui-sidebar-group-tier-one {
        margin-top: @baseSpacing;

        #repository-nav-pull-requests aui-badge {
            margin-top: (@font-size-xxlarge - @font-size-small - 4px)/2;
            // line height - height of badge - padding on badge
        }
    }

    &:focus {
        // clicking on an element with tabindex="-1" still shows a focus outline, we set the tabindex so that input
        // focus is shifted when uses the 'skip to content' accessibility links, so we hide the focus outline here
        outline: none;
    }
}

.aui-sidebar,
.aui-sidebar-submenu {
    .aui-nav > li > .aui-nav-item > .aui-icon {
        .square(@icon-size-small);
        margin-right: @halfSpacing;
    }

    &[aria-expanded="false"] .aui-sidebar-group-tier-one > .aui-nav > li > .aui-nav-item > .aui-icon {
        vertical-align: middle;
        margin-bottom: 1px; // this ensures the box size remains square.
    }

    .aui-nav-heading {
        padding-bottom: @halfSpacing;
    }

    .aui-navgroup-vertical .aui-nav > li > a.aui-nav-item,
    .aui-navgroup-vertical .aui-nav > li > button.aui-nav-item {
        line-height: @icon-size-small;
        padding-top: @halfSpacing;
        padding-bottom: @halfSpacing;
    }

    &[aria-expanded="true"] .aui-navgroup-vertical .aui-nav > li.has-actions:hover .aui-nav-item {
        @actionButtonWidth: @divider-border-width + @baseSpacing + @iconSizeSmall + @baseSpacing + @divider-border-width;
        padding-right:  @actionButtonWidth + @baseSpacing;
    }

    .aui-sidebar-footer > .aui-sidebar-toggle > .aui-icon {
        background-image: url('icons/icon-toggle.svg');
        background-size: @icon-size-small;
    }
}

.aui-sidebar[aria-expanded="false"] .aui-avatar-xxxlarge .aui-avatar-inner {
    border-radius: 3px;
}

.aui-sidebar .project-repository-link .aui-nav-item svg {
    float: none;
    margin-left: @doubleSpacing;
    margin-top: 4px;
    .square(@iconSizeSmall);

    g {
        fill: @labelTextColor;
    }

    [aria-expanded="true"] & {
        float: left;
        margin-left: 0;
        margin-right: @baseSpacing + @halfSpacing;
        margin-top: 2px;
    }
}

.icon-create-pull-request {
    background-image: url('icons/icon-create-pull-request.svg');
}

.icon-fork {
    background-image: url('icons/icon-fork.svg');
}

.icon-forks {
    background-image: url('icons/icon-forks.svg');
}

.icon-clone {
    background-image: url('icons/icon-clone.svg');
}

.icon-source {
    background-image: url('icons/icon-source.svg');
}

.icon-commits {
    background-image: url('icons/icon-commits.svg');
}

.icon-branches {
    background-image: url('icons/icon-branches.svg');
}

.icon-pull-requests {
    background-image: url('icons/icon-pull-requests.svg');
}

.icon-settings {
    background-image: url('icons/icon-settings.svg');
}

.icon-show-actions {
    background-image: url('icons/icon-show-actions.svg');
}

.icon-create-branch {
    background-image: url('icons/icon-create-branch.svg')
}

.icon-add {
    background-image: url('icons/icon-add.svg')
}

.icon-import {
    background-image: url('icons/icon-import.svg')
}

// this shouldn't be necessary after https://ecosystem.atlassian.net/browse/AUI-4396 is resolved
.aui-sidebar-submenu-dialog {
    max-height: 100vh;

    .aui-inline-dialog-contents {
        max-height: inherit;
        overflow-y: auto;
    }
}

/**
 * @aui-override for AUI-2468
 */
.aui-sidebar .aui-sidebar-group:first-child .aui-nav-heading:first-child,
.aui-sidebar-submenu .aui-sidebar-group:first-child .aui-nav-heading:first-child {
    border-top: none;
}

// @aui-override
.aui-sidebar-fly-out {
    z-index: 10;
}

// @aui-override for AUI-2486
.aui-sidebar.aui-sidebar-fly-out ~ .aui-page-panel {
    padding-left: 56px;
}

#content .aui-sidebar.aui-sidebar-fly-out + .aui-page-header {
    padding-left: 56px + @doubleSpacing; // in AUI this is +(@aui-grid * 2)
}

// @aui-override for AUI-2491
.aui-sidebar[aria-expanded='false'] .aui-sidebar-body {
    overflow-x: hidden;
}

// @aui-override AUI-2443 for 16x16 sidebar icon sizes
.aui-sidebar .aui-nav > li > .aui-nav-item > .aui-icon.aui-icon-small {
    &:before {
        font-size: @iconSizeSmall;
        padding: 2px;
    }
}

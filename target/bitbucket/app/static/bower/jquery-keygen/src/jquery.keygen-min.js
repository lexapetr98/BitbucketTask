(function(l,h){l.KeyGenerator=function(){var d="THE A AN AS AND OF OR".split(" "),a={},f=function(a){return h.grep(a,function(a,b){return-1===h.inArray(a,d)})},n=function(a){var c="";h.each(a,function(a,e){c+=e.charAt(0)});return c},m=function(a){var c=!1,b;for(b=0;b<a.length;b++){var g=a[b];if(g&&1===g.length&&-1!==g.search("[AEIOUY]"))c=!0;else if(c)return a.substring(0,b+1)}return a};a[199]="C";a[231]="c";a[252]="u";a[251]="u";a[250]="u";a[249]="u";a[233]="e";a[234]="e";a[235]="e";a[232]="e";a[226]=
"a";a[228]="a";a[224]="a";a[229]="a";a[225]="a";a[239]="i";a[238]="i";a[236]="i";a[237]="i";a[196]="A";a[197]="A";a[201]="E";a[230]="ae";a[198]="Ae";a[244]="o";a[246]="o";a[242]="o";a[243]="o";a[220]="U";a[255]="Y";a[214]="O";a[241]="n";a[209]="N";return{generateKey:function(c,e){e=h.extend({},e);var b="number"==typeof e.desiredKeyLength?e.desiredKeyLength:4;e="number"==typeof e.maxKeyLength?e.maxKeyLength:Infinity;c=h.trim(c);if(!c)return"";for(var g=[],d=0,p=c.length;d<p;d++){var l=a[c.charCodeAt(d)];
g.push(l?l:c[d])}c=g.join("");var k=[];h.each(c.split(/\s+/),function(a,b){b&&(b=b.replace(/[^a-zA-Z]/g,""),b=b.toUpperCase(),b.length&&k.push(b))});b&&k.join("").length>b&&(k=f(k));0==k.length?b="":1==k.length?(c=k[0],g=m(c),b=e<c.length||Math.abs(c.length-b)>=Math.abs(g.length-b)?g:c):(c=k.join("").length,g=n(k),b=e<c||Math.abs(c-b)>=Math.abs(g.length-b)?g:k.join(""));e&&b.length>e&&(b=b.substr(0,e));return b}}};var q=l.KeyGenerator();h.fn.generateFrom=function(d,a){var f=h(this).first();d=d.first();
a=h.extend({},{desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},a);(function(){var l=function(){f.val();f.val()&&f.data("lastGeneratedValue")!==f.val()&&f.data("autosuggest",!1);if(!1!==f.data("autosuggest")){var b=q.generateKey(d.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength});f.data("lastGeneratedValue",b);f.val(b)}},m=function(a){c(a,l)},c=function(b,c){var d=h(b.target);var f=function(){e(b);
c();d.is(":visible")&&d.data("checkHook",setTimeout(f,a.timeoutMS))};d.data("checkHook")||d.data("checkHook",setTimeout(f,0))},e=function(a){a=h(a.target);clearTimeout(a.data("checkHook"));a.removeData("checkHook")};d.attr("maxlength",a.maxNameLength);f.attr("maxlength",a.maxKeyLength);f.css("text-transform","uppercase");document.activeElement&&document.activeElement===d[0]&&m({target:d[0]});d.focus(m);d.blur(e)})();return this}})(window,jQuery);